<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../../displayToc.js"></script>
<script language="JavaScript" src="../../../tocParas.js"></script>
<script language="JavaScript" src="../../../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../../../scineplex.css">
<title>WWW::Mechanize::FAQ - Frequently Asked Questions about WWW::Mechanize</title>
<link rel="stylesheet" href="../../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>


<!-- INDEX BEGIN -->
<div name="index">
<script>writelinks('__top__',3);</script>
<h1><a>WWW::Mechanize::FAQ - Frequently Asked Questions about WWW::Mechanize</a></h1>
<p><a name="__index__"></a></p>


<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#how_to_get_help_with_www__mechanize">How to get help with WWW::Mechanize</a></li>
	<li><a href="#javascript">JavaScript</a></li>
	<ul>

		<li><a href="#i_have_this_web_page_that_has_javascript_on_it__and_my_mech_program_doesn_t_work_">I have this web page that has JavaScript on it, and my Mech program doesn't work.</a></li>
		<li><a href="#i_thought_mech_was_supposed_to_work_like_a_web_browser_">I thought Mech was supposed to work like a web browser.</a></li>
		<li><a href="#are_you_going_to_add_javascript_support">Are you going to add JavaScript support?</a></li>
		<li><a href="#wouldn_t_that_be_a_great_thing_to_have_in_www__mechanize">Wouldn't that be a great thing to have in WWW::Mechanize?</a></li>
		<li><a href="#would_it_be_hard_to_do">Would it be hard to do?</a></li>
		<li><a href="#is_anyone_working_on_it">Is anyone working on it?</a></li>
		<li><a href="#it_would_really_help_me_with_a_project_i_m_working_on_">It would really help me with a project I'm working on.</a></li>
		<li><a href="#do_you_know_when_it_might_get_added">Do you know when it might get added?</a></li>
		<li><a href="#maybe_i_ll_ask_around_and_see_if_anyone_else_knows_of_a_solution_">Maybe I'll ask around and see if anyone else knows of a solution.</a></li>
		<li><a href="#so_what_can_i_do">So what can I do?</a></li>
	</ul>

	<li><a href="#how_do_i_do_x">How do I do X?</a></li>
	<ul>

		<li><a href="#can_i_do__such_and_such__with_www__mechanize">Can I do [such-and-such] with WWW::Mechanize?</a></li>
		<li><a href="#how_do_i_use_www__mechanize_through_a_proxy_server">How do I use WWW::Mechanize through a proxy server?</a></li>
		<li><a href="#how_can_i_see_what_fields_are_on_the_forms">How can I see what fields are on the forms?</a></li>
		<li><a href="#how_do_i_get_mech_to_handle_authentication">How do I get Mech to handle authentication?</a></li>
		<li><a href="#how_can_i_get_www__mechanize_to_execute_this_javascript">How can I get WWW::Mechanize to execute this JavaScript?</a></li>
		<li><a href="#how_do_i_check_a_checkbox_that_doesn_t_have_a_value_defined">How do I check a checkbox that doesn't have a value defined?</a></li>
		<li><a href="#how_do_i_handle_frames">How do I handle frames?</a></li>
		<li><a href="#how_do_i_get_a_list_of_http_headers_and_their_values">How do I get a list of HTTP headers and their values?</a></li>
	</ul>

	<li><a href="#why_doesn_t_this_work__debugging_your_mechanize_program">Why doesn't this work: Debugging your Mechanize program</a></li>
	<ul>

		<li><a href="#my_mech_program_doesn_t_work__but_it_works_in_the_browser_">My Mech program doesn't work, but it works in the browser.</a></li>
		<li><a href="#my_mech_program_gets_these_500_errors_">My Mech program gets these 500 errors.</a></li>
		<li><a href="#why_doesn_t_my_program_handle_this_form_correctly">Why doesn't my program handle this form correctly?</a></li>
		<li><a href="#why_don_t_https____urls_work">Why don't https:// URLs work?</a></li>
		<li><a href="#why_do_i_get_input__fieldname__is_readonly">Why do I get &quot;Input 'fieldname' is readonly&quot;?</a></li>
		<li><a href="#i_tried_to__such_and_such__and_i_got_this_weird_error_">I tried to [such-and-such] and I got this weird error.</a></li>
		<li><a href="#how_do_i_figure_out_why__mech__get__url__doesn_t_work">How do I figure out why <code>$mech-&gt;get($url)</code> doesn't work?</a></li>
		<li><a href="#i_submitted_a_form__but_the_server_ignored_everything__i_got_an_empty_form_back_">I submitted a form, but the server ignored everything!  I got an empty form back!</a></li>
		<li><a href="#i_ve_logged_in_to_the_server__but_i_get_500_errors_when_i_try_to_get_to_protected_content_">I've logged in to the server, but I get 500 errors when I try to get to protected content.</a></li>
		<li><a href="#mech_is_a_big_memory_pig__i_m_running_out_of_ram_">Mech is a big memory pig!  I'm running out of RAM!</a></li>
	</ul>

	<li><a href="#author">AUTHOR</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>WWW::Mechanize::FAQ - Frequently Asked Questions about WWW::Mechanize</p>
<p>
</p>
<hr />
<h1><a name="how_to_get_help_with_www__mechanize">How to get help with WWW::Mechanize</a></h1>
<p>If your question isn't answered here in the FAQ, please turn to the
communities at:</p>
<ul>
<li><strong><a name="http_perlmonks_org" class="item"><a href="http://perlmonks.org">http://perlmonks.org</a></a></strong>

<li><strong><a name="the_libwww_perl_mailing_list_at_http_lists_perl_org" class="item">The libwww-perl mailing list at <a href="http://lists.perl.org">http://lists.perl.org</a></a></strong>

</ul>
<p>
</p>
<hr />
<h1><a name="javascript">JavaScript</a></h1>
<p>
</p>
<h2><a name="i_have_this_web_page_that_has_javascript_on_it__and_my_mech_program_doesn_t_work_">I have this web page that has JavaScript on it, and my Mech program doesn't work.</a></h2>
<p>That's because WWW::Mechanize doesn't operate on the JavaScript.  It only
understands the HTML parts of the page.</p>
<p>
</p>
<h2><a name="i_thought_mech_was_supposed_to_work_like_a_web_browser_">I thought Mech was supposed to work like a web browser.</a></h2>
<p>It does pretty much, but it doesn't support JavaScript.</p>
<p>I added some basic attempts at picking up URLs in <a href="../../../lib/pods/perlfunc.html#open"><code>window.open()</code></a>
calls and return them in <code>$mech-&gt;links</code>.  They work sometimes.
Beyond that, there's no support for JavaScript.</p>
<p>
</p>
<h2><a name="are_you_going_to_add_javascript_support">Are you going to add JavaScript support?</a></h2>
<p>I will if anyone sends me the code to do it.  I'm not going to write a
JavaScript processor myself.</p>
<p>
</p>
<h2><a name="wouldn_t_that_be_a_great_thing_to_have_in_www__mechanize">Wouldn't that be a great thing to have in WWW::Mechanize?</a></h2>
<p>Yes.</p>
<p>
</p>
<h2><a name="would_it_be_hard_to_do">Would it be hard to do?</a></h2>
<p>Hard enough that I don't want to deal with it myself.  Plus, I don't
use JavaScript myself, so I don't have an itch to scratch.</p>
<p>
</p>
<h2><a name="is_anyone_working_on_it">Is anyone working on it?</a></h2>
<p>I've heard noises from people every so often over the past couple of
years, but nothing you'd pin your hopes on.</p>
<p>
</p>
<h2><a name="it_would_really_help_me_with_a_project_i_m_working_on_">It would really help me with a project I'm working on.</a></h2>
<p>I'm sure it would.</p>
<p>
</p>
<h2><a name="do_you_know_when_it_might_get_added">Do you know when it might get added?</a></h2>
<p>I have no idea if or when such a thing will ever get done.  I can
guarantee that as soon as there's anything close to JavaScript support
I will let everyone know.</p>
<p>
</p>
<h2><a name="maybe_i_ll_ask_around_and_see_if_anyone_else_knows_of_a_solution_">Maybe I'll ask around and see if anyone else knows of a solution.</a></h2>
<p>If you must, but I doubt that anyone's written JavaScript support for
Mechanize and neglected to tell me about it.</p>
<p>
</p>
<h2><a name="so_what_can_i_do">So what can I do?</a></h2>
<p>Since Javascript is completely visible to the client, it cannot be used
to prevent a scraper from following links. But it can make life difficult,
and until someone writes a Javascript interpreter for Perl or a Mechanize
clone to control Firefox, there will be no general solution.  But if
you want to scrape specific pages, then a solution is always possible.</p>
<p>One typical use of Javascript is to perform argument checking before
posting to the server. The URL you want is probably just buried in the
Javascript function. Do a regular expression match on
<a href="#content"><code>$mech-&gt;content()</code></a>
to find the link that you want and <code>$mech-&gt;get</code> it directly (this
assumes that you know what you are looking for in advance).</p>
<p>In more difficult cases, the Javascript is used for URL mangling to
satisfy the needs of some middleware. In this case you need to figure
out what the Javascript is doing (why are these URLs always really
long?). There is probably some function with one or more arguments which
calculates the new URL. Step one: using your favorite browser, get the
before and after URLs and save them to files. Edit each file, converting
the the argument separators ('?', '&amp;' or ';') into newlines. Now it is
easy to use diff or comm to find out what Javascript did to the URL.
Step 2 - find the function call which created the URL - you will need
to parse and interpret its argument list. Using the Javascript Debugger
Extension for Firefox may help with the analysis. At this point, it is
fairly trivial to write your own function which emulates the Javascript
for the pages you want to process.</p>
<p>Here's annother approach that answers the question, &quot;It works in Firefox,
but why not Mech?&quot;  Everything the web server knows about the client is
present in the HTTP request. If two requests are identical, the results
should be identical. So the real question is &quot;What is different between
the mech request and the Firefox request?&quot;</p>
<p>The Firefox extension &quot;Tamper Data&quot; is an effective tool for examining
the headers of the requests to the server. Compare that with what LWP
is sending. Once the two are identical, the action of the server should
be the same as well.</p>
<p>I say &quot;should&quot;, because this is an oversimplification - some values
are naturally unique, e.g. a SessionID, but if a SessionID is present,
that is probably sufficient, even though the value will be different
between the LWP request and the Firefox request. The server could use
the session to store information which is troublesome, but that's not
the first place to look (and highly unlikely to be relevant when you
are requesting the login page of your site).</p>
<p>Generally the problem is to be found in missing or incorrect POSTDATA
arguments, Cookies, User-Agents, Accepts, etc. If you are using mech,
then redirects and cookies should not be a problem, but are listed here
for completeness. If you are missing headers, <code>$mech-&gt;add_header</code>
can be used to add the headers that you need.</p>
<p>
</p>
<hr />
<h1><a name="how_do_i_do_x">How do I do X?</a></h1>
<p>
</p>
<h2><a name="can_i_do__such_and_such__with_www__mechanize">Can I do [such-and-such] with WWW::Mechanize?</a></h2>
<p>If it's possible with LWP::UserAgent, then yes.  WWW::Mechanize is
a subclass of <a href="../../../lib/LWP/UserAgent.html">the LWP::UserAgent manpage</a>, so all the wondrous magic of that
class is inherited.</p>
<p>
</p>
<h2><a name="how_do_i_use_www__mechanize_through_a_proxy_server">How do I use WWW::Mechanize through a proxy server?</a></h2>
<p>See the docs in <a href="../../../lib/LWP/UserAgent.html">the LWP::UserAgent manpage</a> on how to use the proxy.  Short version:</p>
<pre>
    <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">proxy</span><span class="operator">(</span><span class="operator">[</span><span class="string">'http'</span><span class="operator">,</span> <span class="string">'ftp'</span><span class="operator">]</span><span class="operator">,</span> <span class="string">'http://proxy.example.com:8000/'</span><span class="operator">);</span>
</pre>
<p>or get the specs from the environment:</p>
<pre>
    <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">env_proxy</span><span class="operator">();</span>
</pre>
<pre>
    # Environment set like so:
    gopher_proxy=<a href="http://proxy.my.place/">http://proxy.my.place/</a>
    wais_proxy=<a href="http://proxy.my.place/">http://proxy.my.place/</a>
    no_proxy=&quot;localhost,my.domain&quot;
    export gopher_proxy wais_proxy no_proxy</pre>
<p>
</p>
<h2><a name="how_can_i_see_what_fields_are_on_the_forms">How can I see what fields are on the forms?</a></h2>
<p>Use the mech-dump utility, optionaly installed with Mechanize.</p>
<pre>
    $ mech-dump --forms <a href="http://search.cpan.org">http://search.cpan.org</a>
    Dumping forms
    GET <a href="http://search.cpan.org/search">http://search.cpan.org/search</a>
      query=
      mode=all                        (option)  [*all|module|dist|author]
      &lt;NONAME&gt;=CPAN Search            (submit)</pre>
<p>
</p>
<h2><a name="how_do_i_get_mech_to_handle_authentication">How do I get Mech to handle authentication?</a></h2>
<pre>
    <span class="keyword">use</span> <span class="variable">MIME::Base64</span><span class="operator">;</span>
</pre>
<pre>
    <span class="keyword">my</span> <span class="variable">$agent</span> <span class="operator">=</span> <span class="variable">WWW::Mechanize</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">();</span>
    <span class="keyword">my</span> <span class="variable">@args</span> <span class="operator">=</span> <span class="operator">(</span>
        <span class="string">Authorization</span> <span class="operator">=&gt;</span> <span class="string">"Basic "</span> <span class="operator">.</span>
            <span class="variable">MIME::Base64::encode</span><span class="operator">(</span> <span class="variable">USER</span> <span class="operator">.</span> <span class="string">':'</span> <span class="operator">.</span> <span class="variable">PASS</span> <span class="operator">)</span>
    <span class="operator">);</span>
</pre>
<pre>
    <span class="variable">$agent</span><span class="operator">-&gt;</span><span class="variable">credentials</span><span class="operator">(</span> <span class="variable">ADDRESS</span><span class="operator">,</span> <span class="variable">REALM</span><span class="operator">,</span> <span class="variable">USER</span><span class="operator">,</span> <span class="variable">PASS</span> <span class="operator">);</span>
    <span class="variable">$agent</span><span class="operator">-&gt;</span><span class="variable">get</span><span class="operator">(</span> <span class="variable">URL</span><span class="operator">,</span> <span class="variable">@args</span> <span class="operator">);</span>
</pre>
<p>
</p>
<h2><a name="how_can_i_get_www__mechanize_to_execute_this_javascript">How can I get WWW::Mechanize to execute this JavaScript?</a></h2>
<p>You can't.  JavaScript is entirely client-based, and WWW::Mechanize
is a client that doesn't understand JavaScript.  See the top part
of this FAQ.</p>
<p>
</p>
<h2><a name="how_do_i_check_a_checkbox_that_doesn_t_have_a_value_defined">How do I check a checkbox that doesn't have a value defined?</a></h2>
<p>Set it to to the value of &quot;on&quot;.</p>
<pre>
    <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">field</span><span class="operator">(</span> <span class="string">my_checkbox</span> <span class="operator">=&gt;</span> <span class="string">'on'</span> <span class="operator">);</span>
</pre>
<p>
</p>
<h2><a name="how_do_i_handle_frames">How do I handle frames?</a></h2>
<p>You don't deal with them as frames, per se, but as links.  Extract
them with</p>
<pre>
    <span class="keyword">my</span> <span class="variable">@frame_links</span> <span class="operator">=</span> <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">find_link</span><span class="operator">(</span> <span class="string">tag</span> <span class="operator">=&gt;</span> <span class="string">"frame"</span> <span class="operator">);</span>
</pre>
<p>
</p>
<h2><a name="how_do_i_get_a_list_of_http_headers_and_their_values">How do I get a list of HTTP headers and their values?</a></h2>
<p>All <a href="../../../lib/HTTP/Headers.html">the HTTP::Headers manpage</a> methods work on a <a href="../../../lib/HTTP/Response.html">the HTTP::Response manpage</a> object which is
returned by the <em>get()</em>, <em>reload()</em>, <em>response()/res()</em>, <em>click()</em>,
<em>submit_form()</em>, and <em>request()</em> methods.</p>
<pre>
    <span class="keyword">my</span> <span class="variable">$mech</span> <span class="operator">=</span> <span class="variable">WWW::Mechanize</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span> <span class="string">autocheck</span> <span class="operator">=&gt;</span> <span class="number">1</span> <span class="operator">);</span>
    <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">get</span><span class="operator">(</span> <span class="string">'http://my.site.com'</span> <span class="operator">);</span>
    <span class="keyword">my</span> <span class="variable">$res</span> <span class="operator">=</span> <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">response</span><span class="operator">();</span>
    <span class="keyword">for</span> <span class="keyword">my</span> <span class="variable">$key</span> <span class="operator">(</span> <span class="variable">$response</span><span class="operator">-&gt;</span><span class="variable">header_field_names</span><span class="operator">()</span> <span class="operator">)</span> <span class="operator">{</span>
        <span class="keyword">print</span> <span class="variable">$key</span><span class="operator">,</span> <span class="string">" : "</span><span class="operator">,</span> <span class="variable">$response</span><span class="operator">-&gt;</span><span class="variable">header</span><span class="operator">(</span> <span class="variable">$key</span> <span class="operator">),</span> <span class="string">"\n"</span><span class="operator">;</span>
    <span class="operator">}</span>
</pre>
<p>
</p>
<hr />
<h1><a name="why_doesn_t_this_work__debugging_your_mechanize_program">Why doesn't this work: Debugging your Mechanize program</a></h1>
<p>
</p>
<h2><a name="my_mech_program_doesn_t_work__but_it_works_in_the_browser_">My Mech program doesn't work, but it works in the browser.</a></h2>
<p>Mechanize acts like a browser, but apparently something you're doing
is not matching the browser's behavior.  Maybe it's expecting a
certain web client, or maybe you've not handling a field properly.
For some reason, your Mech problem isn't doing exactly what the
browser is doing, and when you find that, you'll have the answer.</p>
<p>
</p>
<h2><a name="my_mech_program_gets_these_500_errors_">My Mech program gets these 500 errors.</a></h2>
<p>A 500 error from the web server says that the program on the server
side died.  Probably the web server program was expecting certain
inputs that you didn't supply, and instead of handling it nicely,
the program died.</p>
<p>Whatever the cause of the 500 error, if it works in the browser,
but not in your Mech program, you're not acting like the browser.
See the previous question.</p>
<p>
</p>
<h2><a name="why_doesn_t_my_program_handle_this_form_correctly">Why doesn't my program handle this form correctly?</a></h2>
<p>Run <em class="file">mech-dump</em> on your page and see what it says.</p>
<p><em class="file">mech-dump</em> is a marvelous diagnostic tool for figuring out what forms
and fields are on the page.  Say you're scraping CNN.com, you'd get this:</p>
<pre>
    $ mech-dump <a href="http://www.cnn.com/">http://www.cnn.com/</a>
    GET <a href="http://search.cnn.com/cnn/search">http://search.cnn.com/cnn/search</a>
      source=cnn                     (hidden readonly)
      invocationType=search/top      (hidden readonly)
      sites=web                      (radio)    [*web/The Web ??|cnn/CNN.com ??]
      query=                         (text)
      &lt;NONAME&gt;=Search                (submit)</pre>
<pre>
    POST <a href="http://cgi.money.cnn.com/servlets/quote_redirect">http://cgi.money.cnn.com/servlets/quote_redirect</a>
      query=                         (text)
      &lt;NONAME&gt;=GET                   (submit)</pre>
<pre>
    POST <a href="http://polls.cnn.com/poll">http://polls.cnn.com/poll</a>
      poll_id=2112                   (hidden readonly)
      question_1=&lt;UNDEF&gt;             (radio)    [1/Simplistic option|2/VIEW RESULTS]
      &lt;NONAME&gt;=VOTE                  (submit)</pre>
<pre>
    GET <a href="http://search.cnn.com/cnn/search">http://search.cnn.com/cnn/search</a>
      source=cnn                     (hidden readonly)
      invocationType=search/bottom   (hidden readonly)
      sites=web                      (radio)    [*web/??CNN.com|cnn/??]
      query=                         (text)
      &lt;NONAME&gt;=Search                (submit)</pre>
<p>Four forms, including the first one duplicated at the end.  All the
fields, all their defaults, lovingly generated by HTML::Form's <a href="../../../lib/pods/perlfunc.html#dump"><code>dump</code></a>
method.</p>
<p>If you want to run <em class="file">mech-dump</em> on something that doesn't lend itself
to a quick URL fetch, then use the <code>save_content()</code> method to write
the HTML to a file, and run <em class="file">mech-dump</em> on the file.</p>
<p>
</p>
<h2><a name="why_don_t_https____urls_work">Why don't https:// URLs work?</a></h2>
<p>You need either <a href="../../../IO/Socket/SSL.html">the IO::Socket::SSL manpage</a> or <a href="../../../lib/Crypt/SSLeay.html">the Crypt::SSLeay manpage</a> installed.</p>
<p>
</p>
<h2><a name="why_do_i_get_input__fieldname__is_readonly">Why do I get &quot;Input 'fieldname' is readonly&quot;?</a></h2>
<p>You're trying to change the value of a hidden field and you have
warnings on.</p>
<p>First, make sure that you actually mean to change the field that you're
changing, and that you don't have a typo.  Usually, hidden variables are
set by the site you're working on for a reason.  If you change the value,
you might be breaking some functionality by faking it out.</p>
<p>If you really do want to change a hidden value, make the changes in a
scope that has warnings turned off:</p>
<pre>
    <span class="operator">{</span>
    <span class="keyword">local</span> <span class="variable">$^W</span> <span class="operator">=</span> <span class="number">0</span><span class="operator">;</span>
    <span class="variable">$agent</span><span class="operator">-&gt;</span><span class="variable">field</span><span class="operator">(</span> <span class="string">name</span> <span class="operator">=&gt;</span> <span class="variable">$value</span> <span class="operator">);</span>
    <span class="operator">}</span>
</pre>
<p>
</p>
<h2><a name="i_tried_to__such_and_such__and_i_got_this_weird_error_">I tried to [such-and-such] and I got this weird error.</a></h2>
<p>Are you checking your errors?</p>
<p>Are you sure?</p>
<p>Are you checking that your action succeeded after every action?</p>
<p>Are you sure?</p>
<p>For example, if you try this:</p>
<pre>
    <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">get</span><span class="operator">(</span> <span class="string">"http://my.site.com"</span> <span class="operator">);</span>
    <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">follow_link</span><span class="operator">(</span> <span class="string">"foo"</span> <span class="operator">);</span>
</pre>
<p>and the <code>get</code> call fails for some reason, then the Mech internals
will be unusable for the <code>follow_link</code> and you'll get a weird
error.  You <strong>must</strong>, after every action that GETs or POSTs a page,
check that Mech succeeded, or all bets are off.</p>
<pre>
    <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">get</span><span class="operator">(</span> <span class="string">"http://my.site.com"</span> <span class="operator">);</span>
    <span class="keyword">die</span> <span class="string">"Can't even get the home page: "</span><span class="operator">,</span> <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">response</span><span class="operator">-&gt;</span><span class="variable">status_line</span>
        <span class="keyword">unless</span> <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">success</span><span class="operator">;</span>
</pre>
<pre>
    <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">follow_link</span><span class="operator">(</span> <span class="string">"foo"</span> <span class="operator">);</span>
    <span class="keyword">die</span> <span class="string">"Foo link failed: "</span><span class="operator">,</span> <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">response</span><span class="operator">-&gt;</span><span class="variable">status_line</span>
        <span class="keyword">unless</span> <span class="variable">$mech</span><span class="operator">-&gt;</span><span class="variable">success</span><span class="operator">;</span>
</pre>
<p>
</p>
<h2><a name="how_do_i_figure_out_why__mech__get__url__doesn_t_work">How do I figure out why <code>$mech-&gt;get($url)</code> doesn't work?</a></h2>
<p>There are many reasons why a <code>get()</code> can fail. The server can take
you to someplace you didn't expect. It can generate redirects which are
not properly handled. You can get time-outs. Servers are down more often
than you think! etc, etc, etc. A couple of places to start:</p>
<ol>
<li><strong><a name="status" class="item">Check <code>$mech-&gt;status()</code> after each call</a></strong>

<li><strong><a name="uri" class="item">Check the URL with <code>$mech-&gt;uri()</code> to see where you ended up</a></strong>

<li><strong><a name="try_debugging_with_lwp_debug" class="item">Try debugging with <code>LWP::Debug</code>.</a></strong>

</ol>
<p>If things are really strange, turn on debugging with
<code>use LWP::Debug qw(+);</code>
Just put this in the main program. This causes LWP to print out a trace
of the HTTP traffic between client and server and can be used to figure
out what is happening at the protocol level.</p>
<p>It is also useful to set many traps to verify that processing is
proceeding as expected. A Mech program should always have an &quot;I didn't
expect to get here&quot; or &quot;I don't recognize the page that I am processing&quot;
case and bail out.</p>
<p>Since errors can be transient, by the time you notice that the error
has occurred, it might not be possible to reproduce it manually. So
for automated processing it is useful to email yourself the following
information:</p>
<ul>
<li><strong><a name="where_processing_is_taking_place" class="item">where processing is taking place</a></strong>

<li><strong><a name="an_error_message" class="item">An Error Message</a></strong>

<li><strong>$mech-&gt;uri</strong>

<li><strong><a name="content" class="item">$mech-&gt;content</a></strong>

</ul>
<p>You can also save the content of the page with <code>$mech-&gt;save_content( 'filename.html' );</code></p>
<p>
</p>
<h2><a name="i_submitted_a_form__but_the_server_ignored_everything__i_got_an_empty_form_back_">I submitted a form, but the server ignored everything!  I got an empty form back!</a></h2>
<p>The post is handled by application software. It is common for PHP
programmers to use the same file both to display a form and to process
the arguments returned. So the first task of the application programmer
is to decide whether there are arguments to processes. The program can
check whether a particular parameter has been set, whether a hidden
parameter has been set, or whether the submit button has been clicked.
(There are probably other ways that I haven't thought of).</p>
<p>In any case, if your form is not setting the parameter (e.g. the submit
button) which the web application is keying on (and as an outsider there
is no way to know what it is keying on), it will not notice that the form
has been submitted. Try using <code>$mech-&gt;click()</code> instead of
<code>$mech-&gt;submit()</code> or vice-versa.</p>
<p>
</p>
<h2><a name="i_ve_logged_in_to_the_server__but_i_get_500_errors_when_i_try_to_get_to_protected_content_">I've logged in to the server, but I get 500 errors when I try to get to protected content.</a></h2>
<p>Some web sites use distributed databases for their processing. It
can take a few seconds for the login/session information to percolate
through to all the servers. For human users with their slow reaction
times, this is not a problem, but a Perl script can outrun the server.
So try adding a <a href="../../../lib/pods/perlfunc.html#sleep"><code>sleep(5)</code></a> between logging in and actually doing anything
(the optimal delay must be determined experimentally).</p>
<p>
</p>
<h2><a name="mech_is_a_big_memory_pig__i_m_running_out_of_ram_">Mech is a big memory pig!  I'm running out of RAM!</a></h2>
<p>Mech keeps a history of every page, and the state it was in.  It actually
keeps a clone of the full Mech object at every step along the way.</p>
<p>You can limit this stack size with the <code>stack_depth</code> parm in the <code>new()</code>
constructor.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Copyright 2005 Andy Lester <code>&lt;andy at petdance.com&gt;</code></p>

</body>

</html>
