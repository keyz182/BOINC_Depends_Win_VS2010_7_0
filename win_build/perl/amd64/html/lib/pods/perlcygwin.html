<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../displayToc.js"></script>
<script language="JavaScript" src="../../tocParas.js"></script>
<script language="JavaScript" src="../../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../../scineplex.css">
<title>README.cygwin - Perl for Cygwin</title>
<link rel="stylesheet" href="../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>


<!-- INDEX BEGIN -->
<div name="index">
<script>writelinks('__top__',2);</script>
<h1><a>README.cygwin - Perl for Cygwin</a></h1>
<p><a name="__index__"></a></p>


<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#prerequisites_for_compiling_perl_on_cygwin">PREREQUISITES FOR COMPILING PERL ON CYGWIN</a></li>
	<ul>

		<li><a href="#cygwin___gnu_cygnus_windows__don_t_leave_unix_without_it_">Cygwin = GNU+Cygnus+Windows (Don't leave UNIX without it)</a></li>
		<li><a href="#cygwin_configuration">Cygwin Configuration</a></li>
	</ul>

	<li><a href="#configure_perl_on_cygwin">CONFIGURE PERL ON CYGWIN</a></li>
	<ul>

		<li><a href="#stripping_perl_binaries_on_cygwin">Stripping Perl Binaries on Cygwin</a></li>
		<li><a href="#optional_libraries_for_perl_on_cygwin">Optional Libraries for Perl on Cygwin</a></li>
		<li><a href="#configure_time_options_for_perl_on_cygwin">Configure-time Options for Perl on Cygwin</a></li>
		<li><a href="#suspicious_warnings_on_cygwin">Suspicious Warnings on Cygwin</a></li>
	</ul>

	<li><a href="#make_on_cygwin">MAKE ON CYGWIN</a></li>
	<li><a href="#test_on_cygwin">TEST ON CYGWIN</a></li>
	<ul>

		<li><a href="#file_permissions_on_cygwin">File Permissions on Cygwin</a></li>
		<li><a href="#ndbm_file_and_odbm_file_do_not_work_on_fat_filesystems">NDBM_File and ODBM_File do not work on FAT filesystems</a></li>
		<li><a href="#fork___failures_in_io___tests"><a href="../../lib/pods/perlfunc.html#fork"><code>fork()</code></a> failures in io_* tests</a></li>
	</ul>

	<li><a href="#specific_features_of_the_cygwin_port">Specific features of the Cygwin port</a></li>
	<ul>

		<li><a href="#script_portability_on_cygwin">Script Portability on Cygwin</a></li>
		<li><a href="#prebuilt_methods_">Prebuilt methods:</a></li>
	</ul>

	<li><a href="#install_perl_on_cygwin">INSTALL PERL ON CYGWIN</a></li>
	<li><a href="#manifest_on_cygwin">MANIFEST ON CYGWIN</a></li>
	<li><a href="#bugs_on_cygwin">BUGS ON CYGWIN</a></li>
	<li><a href="#authors">AUTHORS</a></li>
	<li><a href="#history">HISTORY</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>README.cygwin - Perl for Cygwin</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>This document will help you configure, make, test and install Perl
on Cygwin.  This document also describes features of Cygwin that will
affect how Perl behaves at runtime.</p>
<p><strong>NOTE:</strong> There are pre-built Perl packages available for Cygwin and a
version of Perl is provided in the normal Cygwin install.  If you do
not need to customize the configuration, consider using one of those
packages.</p>
<p>
</p>
<hr />
<h1><a name="prerequisites_for_compiling_perl_on_cygwin">PREREQUISITES FOR COMPILING PERL ON CYGWIN</a></h1>
<p>
</p>
<h2><a name="cygwin___gnu_cygnus_windows__don_t_leave_unix_without_it_">Cygwin = GNU+Cygnus+Windows (Don't leave UNIX without it)</a></h2>
<p>The Cygwin tools are ports of the popular GNU development tools for Win32
platforms.  They run thanks to the Cygwin library which provides the UNIX
system calls and environment these programs expect.  More information
about this project can be found at:</p>
<pre>
  F&lt;<a href="http://www.cygwin.com/&gt">http://www.cygwin.com/&gt</a>;</pre>
<p>A recent net or commercial release of Cygwin is required.</p>
<p>At the time this document was last updated, Cygwin 1.5.24 was current.</p>
<p>
</p>
<h2><a name="cygwin_configuration">Cygwin Configuration</a></h2>
<p>While building Perl some changes may be necessary to your Cygwin setup so
that Perl builds cleanly.  These changes are <strong>not</strong> required for normal
Perl usage.</p>
<p><strong>NOTE:</strong> The binaries that are built will run on all Win32 versions.
They do not depend on your host system (Win9x/WinME, WinNT/Win2K)
or your Cygwin configuration (<em>ntea</em>, <em>ntsec</em>, binary/text mounts).
The only dependencies come from hard-coded pathnames like <code>/usr/local</code>.
However, your host system and Cygwin configuration will affect Perl's
runtime behavior (see <a href="#test">TEST</a>).</p>
<ul>
<li><strong><a name="path2" class="item"><a href="#path"><code>PATH</code></a></a></strong>

<p>Set the <a href="#path"><code>PATH</code></a> environment variable so that Configure finds the Cygwin
versions of programs.  Any Windows directories should be removed or
moved to the end of your <a href="#path"><code>PATH</code></a>.</p>
</li>
<li><strong><a name="nroff" class="item"><em>nroff</em></a></strong>

<p>If you do not have <em>nroff</em> (which is part of the <em>groff</em> package),
Configure will <strong>not</strong> prompt you to install <em>man</em> pages.</p>
</li>
<li><strong><a name="permissions" class="item">Permissions</a></strong>

<p>On WinNT with either the <em>ntea</em> or <em>ntsec</em> <code>CYGWIN</code> settings, directory
and file permissions may not be set correctly.  Since the build process
creates directories and files, to be safe you may want to run a
<code>chmod -R +w *</code> on the entire Perl source tree.</p>
<p>Also, it is a well known WinNT &quot;feature&quot; that files created by a login
that is a member of the <em>Administrators</em> group will be owned by the
<em>Administrators</em> group.  Depending on your umask, you may find that you
can not write to files that you just created (because you are no longer
the owner).  When using the <em>ntsec</em> <code>CYGWIN</code> setting, this is not an
issue because it &quot;corrects&quot; the ownership to what you would expect on
a UNIX system.</p>
</li>
</ul>
<p>
</p>
<hr />
<h1><a name="configure_perl_on_cygwin">CONFIGURE PERL ON CYGWIN</a></h1>
<p>The default options gathered by Configure with the assistance of
<em class="file">hints/cygwin.sh</em> will build a Perl that supports dynamic loading
(which requires a shared <em class="file">libperl.dll</em>).</p>
<p>This will run Configure and keep a record:</p>
<pre>
  ./Configure 2&gt;&amp;1 | tee log.configure</pre>
<p>If you are willing to accept all the defaults run Configure with <strong>-de</strong>.
However, several useful customizations are available.</p>
<p>
</p>
<h2><a name="stripping_perl_binaries_on_cygwin">Stripping Perl Binaries on Cygwin</a></h2>
<p>It is possible to strip the EXEs and DLLs created by the build process.
The resulting binaries will be significantly smaller.  If you want the
binaries to be stripped, you can either add a <strong>-s</strong> option when Configure
prompts you,</p>
<pre>
  Any additional ld flags (NOT including libraries)? [none] -s
  Any special flags to pass to g++ to create a dynamically loaded library?
  [none] -s
  Any special flags to pass to gcc to use dynamic linking? [none] -s</pre>
<p>or you can edit <em class="file">hints/cygwin.sh</em> and uncomment the relevant variables
near the end of the file.</p>
<p>
</p>
<h2><a name="optional_libraries_for_perl_on_cygwin">Optional Libraries for Perl on Cygwin</a></h2>
<p>Several Perl functions and modules depend on the existence of
some optional libraries.  Configure will find them if they are
installed in one of the directories listed as being used for library
searches.  Pre-built packages for most of these are available from
the Cygwin installer.</p>
<ul>
<li><strong><a name="lcrypt" class="item"><code>-lcrypt</code></a></strong>

<p>The crypt package distributed with Cygwin is a Linux compatible 56-bit
DES crypt port by Corinna Vinschen.</p>
<p>Alternatively, the crypt libraries in GNU libc have been ported to Cygwin.</p>
<p>The DES based Ultra Fast Crypt port was done by Alexey Truhan:</p>
<pre>
  <a href="ftp://ftp.uni-erlangen.de/pub/pc/gnuwin32/cygwin/porters/Okhapkin_Sergey/cw32crypt-dist-0.tgz">ftp://ftp.uni-erlangen.de/pub/pc/gnuwin32/cygwin/porters/Okhapkin_Sergey/cw32crypt-dist-0.tgz</a></pre>
<p>NOTE: There are various export restrictions on DES implementations,
see the glibc README for more details.</p>
<p>The MD5 port was done by Andy Piper:</p>
<pre>
  <a href="ftp://ftp.uni-erlangen.de/pub/pc/gnuwin32/cygwin/porters/Okhapkin_Sergey/libcrypt.tgz">ftp://ftp.uni-erlangen.de/pub/pc/gnuwin32/cygwin/porters/Okhapkin_Sergey/libcrypt.tgz</a></pre>
</li>
<li><strong><a name="lgdbm_compat" class="item"><code>-lgdbm_compat</code> (<code>use GDBM_File</code>)</a></strong>

<p>GDBM is available for Cygwin.</p>
<p>NOTE: The GDBM library only works on NTFS partitions.</p>
</li>
<li><strong><a name="ldb" class="item"><code>-ldb</code> (<code>use DB_File</code>)</a></strong>

<p>BerkeleyDB is available for Cygwin.</p>
<p>NOTE: The BerkeleyDB library only completely works on NTFS partitions
and db-4.3 is flawed.</p>
</li>
<li><strong><a name="cygserver" class="item"><code>cygserver</code> (<code>use IPC::SysV</code>)</a></strong>

<p>A port of SysV IPC is available for Cygwin.</p>
<p>NOTE: This has <strong>not</strong> been extensively tested.  In particular,
<code>d_semctl_semun</code> is undefined because it fails a Configure test
and on Win9x the <em>shm*()</em> functions seem to hang.  It also creates
a compile time dependency because <em class="file">perl.h</em> includes <em class="file">&lt;sys/ipc.h</em>&gt;
and <em class="file">&lt;sys/sem.h</em>&gt; (which will be required in the future when compiling
CPAN modules). CURRENTLY NOT SUPPORTED!</p>
</li>
<li><strong><a name="lutil" class="item"><code>-lutil</code></a></strong>

<p>Included with the standard Cygwin netrelease is the inetutils package
which includes libutil.a.</p>
</li>
</ul>
<p>
</p>
<h2><a name="configure_time_options_for_perl_on_cygwin">Configure-time Options for Perl on Cygwin</a></h2>
<p>The <em class="file">INSTALL</em> document describes several Configure-time options.  Some of
these will work with Cygwin, others are not yet possible.  Also, some of
these are experimental.  You can either select an option when Configure
prompts you or you can define (undefine) symbols on the command line.</p>
<ul>
<li><strong><a name="uusedl" class="item"><code>-Uusedl</code></a></strong>

<p>Undefining this symbol forces Perl to be compiled statically.</p>
</li>
<li><strong><a name="uusemymalloc" class="item"><code>-Uusemymalloc</code></a></strong>

<p>By default Perl uses the <code>malloc()</code> included with the Perl source.  If you
want to force Perl to build with the system <code>malloc()</code> undefine this symbol.</p>
</li>
<li><strong><a name="uuseperlio" class="item"><code>-Uuseperlio</code></a></strong>

<p>Undefining this symbol disables the PerlIO abstraction.  PerlIO is now the
default; it is not recommended to disable PerlIO.</p>
</li>
<li><strong><a name="dusemultiplicity" class="item"><code>-Dusemultiplicity</code></a></strong>

<p>Multiplicity is required when embedding Perl in a C program and using
more than one interpreter instance.  This works with the Cygwin port.</p>
</li>
<li><strong><a name="duse64bitint" class="item"><code>-Duse64bitint</code></a></strong>

<p>By default Perl uses 32 bit integers.  If you want to use larger 64
bit integers, define this symbol.</p>
</li>
<li><strong><a name="duselongdouble" class="item"><code>-Duselongdouble</code></a></strong>

<p><em>gcc</em> supports long doubles (12 bytes).  However, several additional
long double math functions are necessary to use them within Perl
(<em>{atan2, cos, exp, floor, fmod, frexp, isnan, log, modf, pow, sin, sqrt}l,
strtold</em>).
These are <strong>not</strong> yet available with Cygwin.</p>
</li>
<li><strong><a name="dusethreads" class="item"><code>-Dusethreads</code></a></strong>

<p>POSIX threads are implemented in Cygwin, define this symbol if you want
a threaded perl.</p>
</li>
<li><strong><a name="duselargefiles" class="item"><code>-Duselargefiles</code></a></strong>

<p>Cygwin uses 64-bit integers for internal size and position calculations,
this will be correctly detected and defined by Configure.</p>
</li>
<li><strong><a name="dmksymlinks" class="item"><code>-Dmksymlinks</code></a></strong>

<p>Use this to build perl outside of the source tree.  This works with Cygwin.
Details can be found in the <em class="file">INSTALL</em> document.  This is the recommended
way to build perl from sources.</p>
</li>
</ul>
<p>
</p>
<h2><a name="suspicious_warnings_on_cygwin">Suspicious Warnings on Cygwin</a></h2>
<p>You may see some messages during Configure that seem suspicious.</p>
<ul>
<li><strong><a name="win9x_and_d_eofnblk" class="item">Win9x and <code>d_eofnblk</code></a></strong>

<p>Win9x does not correctly report <code>EOF</code> with a non-blocking read on a
closed pipe.  You will see the following messages:</p>
<pre>
  But it also returns -1 to signal EOF, so be careful!
  WARNING: you can't distinguish between EOF and no data!</pre>
<pre>
  *** WHOA THERE!!! ***
      The recommended value for $d_eofnblk on this machine was &quot;define&quot;!
      Keep the recommended value? [y]</pre>
<p>At least for consistency with WinNT, you should keep the recommended
value.</p>
</li>
<li><strong><a name="compiler_preprocessor_defines" class="item">Compiler/Preprocessor defines</a></strong>

<p>The following error occurs because of the Cygwin <code>#define</code> of
<code>_LONG_DOUBLE</code>:</p>
<pre>
  Guessing which symbols your C compiler and preprocessor define...
  try.c:&lt;line#&gt;: missing binary operator</pre>
<p>This failure does not seem to cause any problems.  With older gcc
versions, &quot;parse error&quot; is reported instead of &quot;missing binary
operator&quot;.</p>
</li>
</ul>
<p>
</p>
<hr />
<h1><a name="make_on_cygwin">MAKE ON CYGWIN</a></h1>
<p>Simply run <em>make</em> and wait:</p>
<pre>
  make 2&gt;&amp;1 | tee log.make</pre>
<p>
</p>
<hr />
<h1><a name="test_on_cygwin">TEST ON CYGWIN</a></h1>
<p>There are two steps to running the test suite:</p>
<pre>
  make test 2&gt;&amp;1 | tee log.make-test</pre>
<pre>
  <span class="variable">cd</span> <span class="variable">t</span><span class="operator">;</span> <span class="operator">.</span><span class="regex">/perl harness 2&gt;&amp;1 | tee ../log</span><span class="operator">.</span><span class="variable">harness</span>
</pre>
<p>The same tests are run both times, but more information is provided when
running as <code>./perl harness</code>.</p>
<p>Test results vary depending on your host system and your Cygwin
configuration.  If a test can pass in some Cygwin setup, it is always
attempted and explainable test failures are documented.  It is possible
for Perl to pass all the tests, but it is more likely that some tests
will fail for one of the reasons listed below.</p>
<p>
</p>
<h2><a name="file_permissions_on_cygwin">File Permissions on Cygwin</a></h2>
<p>UNIX file permissions are based on sets of mode bits for
{read,write,execute} for each {user,group,other}.  By default Cygwin
only tracks the Win32 read-only attribute represented as the UNIX file
user write bit (files are always readable, files are executable if they
have a <em class="file">.{com,bat,exe}</em> extension or begin with <code>#!</code>, directories are
always readable and executable).  On WinNT with the <em>ntea</em> <code>CYGWIN</code>
setting, the additional mode bits are stored as extended file attributes.
On WinNT with the default <em>ntsec</em> <code>CYGWIN</code> setting, permissions use the
standard WinNT security descriptors and access control lists. Without one of
these options, these tests will fail (listing not updated yet):</p>
<pre>
  Failed Test           List of failed
  ------------------------------------
  io/fs.t               5, 7, 9-10
  lib/anydbm.t          2
  lib/db-btree.t        20
  lib/db-hash.t         16
  lib/db-recno.t        18
  lib/gdbm.t            2
  lib/ndbm.t            2
  lib/odbm.t            2
  lib/sdbm.t            2
  op/stat.t             9, 20 (.tmp not an executable extension)</pre>
<p>
</p>
<h2><a name="ndbm_file_and_odbm_file_do_not_work_on_fat_filesystems">NDBM_File and ODBM_File do not work on FAT filesystems</a></h2>
<p>Do not use NDBM_File or ODBM_File on FAT filesystem.  They can be
built on a FAT filesystem, but many tests will fail:</p>
<pre>
 ../ext/NDBM_File/ndbm.t       13  3328    71   59  83.10%  1-2 4 16-71
 ../ext/ODBM_File/odbm.t      255 65280    ??   ??       %  ??
 ../lib/AnyDBM_File.t           2   512    12    2  16.67%  1 4
 ../lib/Memoize/t/errors.t      0   139    11    5  45.45%  7-11
 ../lib/Memoize/t/tie_ndbm.t   13  3328     4    4 100.00%  1-4
 run/fresh_perl.t                          97    1   1.03%  91</pre>
<p>If you intend to run only on FAT (or if using AnyDBM_File on FAT),
run Configure with the -Ui_ndbm and -Ui_dbm options to prevent
NDBM_File and ODBM_File being built.</p>
<p>With NTFS (and no CYGWIN=nontsec), there should be no problems even if
perl was built on FAT.</p>
<p>
</p>
<h2><a name="fork___failures_in_io___tests"><a href="../../lib/pods/perlfunc.html#fork"><code>fork()</code></a> failures in io_* tests</a></h2>
<p>A <a href="../../lib/pods/perlfunc.html#fork"><code>fork()</code></a> failure may result in the following tests failing:</p>
<pre>
  ext/IO/lib/IO/t/io_multihomed.t
  ext/IO/lib/IO/t/io_sock.t
  ext/IO/lib/IO/t/io_unix.t</pre>
<p>See comment on fork in <a href="#miscellaneous">Miscellaneous</a> below.</p>
<p>
</p>
<hr />
<h1><a name="specific_features_of_the_cygwin_port">Specific features of the Cygwin port</a></h1>
<p>
</p>
<h2><a name="script_portability_on_cygwin">Script Portability on Cygwin</a></h2>
<p>Cygwin does an outstanding job of providing UNIX-like semantics on top of
Win32 systems.  However, in addition to the items noted above, there are
some differences that you should know about.  This is a very brief guide
to portability, more information can be found in the Cygwin documentation.</p>
<ul>
<li><strong><a name="pathnames" class="item">Pathnames</a></strong>

<p>Cygwin pathnames can be separated by forward (<em class="file">/</em>) or backward (<em class="file">\\</em>)
slashes.  They may also begin with drive letters (<em class="file">C:</em>) or Universal
Naming Codes (<em class="file">//UNC</em>).  DOS device names (<em class="file">aux</em>, <em class="file">con</em>, <em class="file">prn</em>,
<em class="file">com*</em>, <em class="file">lpt?</em>, <em class="file">nul</em>) are invalid as base filenames.  However, they
can be used in extensions (e.g., <em class="file">hello.aux</em>).  Names may contain all
printable characters except these:</p>
<pre>
  : * ? &quot; &lt; &gt; |</pre>
<p>File names are case insensitive, but case preserving.  A pathname that
contains a backslash or drive letter is a Win32 pathname (and not subject
to the translations applied to POSIX style pathnames).</p>
<p>For conversion we have <code>Cygwin::win_to_posix_path()</code> and
<code>Cygwin::posix_to_win_path()</code>.</p>
<p>Pathnames may not contain Unicode characters. <code>Cygwin</code> still uses the
ANSI API calls and no Unicode calls because of newlib deficiencies.
There's an unofficial unicode patch for cygwin at
<em class="file"><a href="http://www.okisoft.co.jp/esc/utf8-cygwin/">http://www.okisoft.co.jp/esc/utf8-cygwin/</a></em></p>
</li>
<li><strong><a name="text_binary" class="item">Text/Binary</a></strong>

<p>When a file is opened it is in either text or binary mode.  In text mode
a file is subject to CR/LF/Ctrl-Z translations.  With Cygwin, the default
mode for an <a href="../../lib/pods/perlfunc.html#open"><code>open()</code></a> is determined by the mode of the mount that underlies
the file. See <code>Cygwin::is_binmount()</code>. Perl provides a <a href="../../lib/pods/perlfunc.html#binmode"><code>binmode()</code></a> function
to set binary mode on files that otherwise would be treated as text.
<a href="../../lib/pods/perlfunc.html#sysopen"><code>sysopen()</code></a> with the <code>O_TEXT</code> flag sets text mode on files that otherwise
would be treated as binary:</p>
<pre>
    sysopen(FOO, &quot;bar&quot;, O_WRONLY|O_CREAT|O_TEXT)</pre>
<p><code>lseek()</code>, <a href="../../lib/pods/perlfunc.html#tell"><code>tell()</code></a> and <a href="../../lib/pods/perlfunc.html#sysseek"><code>sysseek()</code></a> only work with files opened in binary
mode.</p>
<p>The text/binary issue is covered at length in the Cygwin documentation.</p>
</li>
<li><strong><a name="perlio" class="item">PerlIO</a></strong>

<p>PerlIO overrides the default Cygwin Text/Binary behaviour.  A file will
always be treated as binary, regardless of the mode of the mount it lives
on, just like it is in UNIX.  So CR/LF translation needs to be requested in
either the <a href="../../lib/pods/perlfunc.html#open"><code>open()</code></a> call like this:</p>
<pre>
  <span class="keyword">open</span><span class="operator">(</span><span class="variable">FH</span><span class="operator">,</span> <span class="string">"&gt;:crlf"</span><span class="operator">,</span> <span class="string">"out.txt"</span><span class="operator">);</span>
</pre>
<p>which will do conversion from LF to CR/LF on the output, or in the
environment settings (add this to your .bashrc):</p>
<pre>
  export PERLIO=crlf</pre>
<p>which will pull in the crlf PerlIO layer which does LF -&gt; CRLF conversion
on every output generated by perl.</p>
</li>
<li><strong><a name="exe" class="item"><em class="file">.exe</em></a></strong>

<p>The Cygwin <a href="../../lib/pods/perlfunc.html#stat"><code>stat()</code></a>, <a href="../../lib/pods/perlfunc.html#lstat"><code>lstat()</code></a> and <a href="../../lib/pods/perlfunc.html#readlink"><code>readlink()</code></a> functions make the <em class="file">.exe</em>
extension transparent by looking for <em class="file">foo.exe</em> when you ask for <em class="file">foo</em>
(unless a <em class="file">foo</em> also exists).  Cygwin does not require a <em class="file">.exe</em>
extension, but <em>gcc</em> adds it automatically when building a program.
However, when accessing an executable as a normal file (e.g., <em>cp</em>
in a makefile) the <em class="file">.exe</em> is not transparent.  The <em>install</em> included
with Cygwin automatically appends a <em class="file">.exe</em> when necessary.</p>
</li>
<li><strong><a name="cygwin_vs_windows_process_ids" class="item">Cygwin vs. Windows process ids</a></strong>

<p>Cygwin processes have their own pid, which is different from the
underlying windows pid.  Most posix compliant Proc functions expect
the cygwin pid, but several Win32::Process functions expect the
winpid. E.g. <a href="../../lib/pods/perlvar.html#__"><code>$$</code></a> is the cygwin pid of <em class="file">/usr/bin/perl</em>, which is not
the winpid.  Use <code>Cygwin::winpid_to_pid()</code> and <code>Cygwin::winpid_to_pid()</code>
to translate between them.</p>
</li>
<li><strong><a name="cygwin_vs_windows_errors" class="item">Cygwin vs. Windows errors</a></strong>

<p>Under Cygwin, $^E is the same as $!.  When using <a href="../../lib/Win32.html">Win32 API Functions</a>,
use <code>Win32::GetLastError()</code> to get the last Windows error.</p>
</li>
<li><strong><a name="chown" class="item"><code>chown()</code></a></strong>

<p>On WinNT <a href="#chown"><code>chown()</code></a> can change a file's user and group IDs.  On Win9x <a href="#chown"><code>chown()</code></a>
is a no-op, although this is appropriate since there is no security model.</p>
</li>
<li><strong><a name="miscellaneous" class="item">Miscellaneous</a></strong>

<p>File locking using the <code>F_GETLK</code> command to <a href="../../lib/pods/perlfunc.html#fcntl"><code>fcntl()</code></a> is a stub that
returns <code>ENOSYS</code>.</p>
<p>Win9x can not <a href="../../lib/pods/perlfunc.html#rename"><code>rename()</code></a> an open file (although WinNT can).</p>
<p>The Cygwin <a href="../../lib/pods/perlfunc.html#chroot"><code>chroot()</code></a> implementation has holes (it can not restrict file
access by native Win32 programs).</p>
<p>Inplace editing <code>perl -i</code> of files doesn't work without doing a backup
of the file being edited <code>perl -i.bak</code> because of windowish restrictions,
therefore Perl adds the suffix <code>.bak</code> automatically if you use <code>perl -i</code>
without specifying a backup extension.</p>
<p>Using <a href="../../lib/pods/perlfunc.html#fork"><code>fork()</code></a> after loading multiple dlls may fail with an internal cygwin
error like the following:</p>
<pre>
  C:\CYGWIN\BIN\PERL.EXE: *** couldn't allocate memory 0x10000(4128768) for 'C:\CYGWIN\LIB\PERL5\5.6.1\CYGWIN-MULTI\AUTO\SOCKET\SOCKET.DLL' alignment, Win32 error 8</pre>
<pre>
    200 [main] perl 377147 sync_with_child: child -395691(0xB8) died before initialization with status code 0x1
   1370 [main] perl 377147 sync_with_child: *** child state child loading dlls</pre>
<p>Use the rebase utility to resolve the conflicting dll addresses.  The
rebase package is included in the Cygwin netrelease.  Use setup.exe from
<em class="file"><a href="http://www.cygwin.com/setup.exe">http://www.cygwin.com/setup.exe</a></em> to install it and run rebaseall.</p>
</li>
</ul>
<p>
</p>
<h2><a name="prebuilt_methods_">Prebuilt methods:</a></h2>
<dl>
<dt><strong><a name="cwd_cwd" class="item"><code>Cwd::cwd</code></a></strong>

<dd>
<p>Returns the current working directory.</p>
</dd>
</li>
<dt><strong><a name="cygwin_pid_to_winpid" class="item"><code>Cygwin::pid_to_winpid</code></a></strong>

<dd>
<p>Translates a cygwin pid to the corresponding Windows pid (which may or
may not be the same).</p>
</dd>
</li>
<dt><strong><a name="cygwin_winpid_to_pid" class="item"><code>Cygwin::winpid_to_pid</code></a></strong>

<dd>
<p>Translates a Windows pid to the corresponding cygwin pid (if any).</p>
</dd>
</li>
<dt><strong><a name="cygwin_win_to_posix_path" class="item"><code>Cygwin::win_to_posix_path</code></a></strong>

<dd>
<p>Translates a Windows path to the corresponding cygwin path respecting
the current mount points. With a second non-null argument returns an
absolute path. Double-byte characters will not be translated.</p>
</dd>
</li>
<dt><strong><a name="cygwin_posix_to_win_path" class="item"><code>Cygwin::posix_to_win_path</code></a></strong>

<dd>
<p>Translates a cygwin path to the corresponding cygwin path respecting
the current mount points. With a second non-null argument returns an
absolute path. Double-byte characters will not be translated.</p>
</dd>
</li>
<dt><strong><a name="mount_table" class="item"><code>Cygwin::mount_table()</code></a></strong>

<dd>
<p>Returns an array of [mnt_dir, mnt_fsname, mnt_type, mnt_opts].</p>
</dd>
<dd>
<pre>
  <span class="variable">perl</span> <span class="keyword">-e</span> <span class="string">'for $i (Cygwin::mount_table) {print join(" ",@$i),"\n";}'</span>
  <span class="operator">/</span><span class="variable">bin</span> <span class="variable">c</span><span class="operator">:\</span><span class="variable">cygwin</span><span class="operator">\</span><span class="variable">bin</span> <span class="keyword">system</span> <span class="keyword">binmode</span><span class="operator">,</span><span class="variable">cygexec</span>
  <span class="operator">/</span><span class="variable">usr</span><span class="operator">/</span><span class="variable">bin</span> <span class="variable">c</span><span class="operator">:\</span><span class="variable">cygwin</span><span class="operator">\</span><span class="variable">bin</span> <span class="keyword">system</span> <span class="keyword">binmode</span>
  <span class="operator">/</span><span class="variable">usr</span><span class="operator">/</span><span class="variable">lib</span> <span class="variable">c</span><span class="operator">:\</span><span class="variable">cygwin</span><span class="operator">\</span><span class="variable">lib</span> <span class="keyword">system</span> <span class="keyword">binmode</span>
  <span class="operator">/</span> <span class="variable">c</span><span class="operator">:\</span><span class="variable">cygwin</span> <span class="keyword">system</span> <span class="keyword">binmode</span>
  <span class="operator">/</span><span class="variable">cygdrive</span><span class="operator">/</span><span class="variable">c</span> <span class="variable">c</span><span class="operator">:</span> <span class="keyword">system</span> <span class="keyword">binmode</span><span class="operator">,</span><span class="variable">noumount</span>
  <span class="operator">/</span><span class="variable">cygdrive</span><span class="operator">/</span><span class="variable">d</span> <span class="variable">d</span><span class="operator">:</span> <span class="keyword">system</span> <span class="keyword">binmode</span><span class="operator">,</span><span class="variable">noumount</span>
  <span class="operator">/</span><span class="variable">cygdrive</span><span class="operator">/</span><span class="variable">e</span> <span class="variable">e</span><span class="operator">:</span> <span class="keyword">system</span> <span class="keyword">binmode</span><span class="operator">,</span><span class="variable">noumount</span>
</pre>
</dd>
</li>
<dt><strong><a name="cygwin_mount_flags" class="item"><code>Cygwin::mount_flags</code></a></strong>

<dd>
<p>Returns the mount type and flags for a specified mount point.
A comma-separated string of mntent-&gt;mnt_type (always
&quot;system&quot; or &quot;user&quot;), then the mntent-&gt;mnt_opts, where
the first is always &quot;binmode&quot; or &quot;textmode&quot;.</p>
</dd>
<dd>
<pre>
  system|user,binmode|textmode,exec,cygexec,cygdrive,mixed,
  notexec,managed,nosuid,devfs,proc,noumount</pre>
</dd>
<dd>
<p>If the argument is &quot;/cygdrive&quot;, then just the volume mount settings,
and the cygdrive mount prefix are returned.</p>
</dd>
<dd>
<p>User mounts override system mounts.</p>
</dd>
<dd>
<pre>
  $ perl -e 'print Cygwin::mount_flags &quot;/usr/bin&quot;'
  system,binmode,cygexec
  $ perl -e 'print Cygwin::mount_flags &quot;/cygdrive&quot;'
  binmode,cygdrive,/cygdrive</pre>
</dd>
</li>
<dt><strong><a name="cygwin_is_binmount" class="item"><code>Cygwin::is_binmount</code></a></strong>

<dd>
<p>Returns true if the given cygwin path is binary mounted, false if the
path is mounted in textmode.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="install_perl_on_cygwin">INSTALL PERL ON CYGWIN</a></h1>
<p>This will install Perl, including <em>man</em> pages.</p>
<pre>
  make install 2&gt;&amp;1 | tee log.make-install</pre>
<p>NOTE: If <code>STDERR</code> is redirected <code>make install</code> will <strong>not</strong> prompt
you to install <em>perl</em> into <em class="file">/usr/bin</em>.</p>
<p>You may need to be <em>Administrator</em> to run <code>make install</code>.  If you
are not, you must have write access to the directories in question.</p>
<p>Information on installing the Perl documentation in HTML format can be
found in the <em class="file">INSTALL</em> document.</p>
<p>
</p>
<hr />
<h1><a name="manifest_on_cygwin">MANIFEST ON CYGWIN</a></h1>
<p>These are the files in the Perl release that contain references to Cygwin.
These very brief notes attempt to explain the reason for all conditional
code.  Hopefully, keeping this up to date will allow the Cygwin port to
be kept as clean as possible.</p>
<dl>
<dt><strong><a name="documentation2" class="item">Documentation</a></strong>

<dd>
<pre>
  INSTALL README.cygwin README.win32 MANIFEST
  Changes Changes5.004 Changes5.005 Changes5.6 Changes5.8
  pod/perl.pod pod/<a href="../../lib/pods/perlport.html">perlport</a>.pod pod/<a href="../../lib/pods/perlfaq3.html">perlfaq3</a>.pod
  pod/<a href="../../lib/pods/perldelta.html">perldelta</a>.pod pod/<a href="../../lib/pods/perl5004delta.html">perl5004delta</a>.pod pod/<a href="../../lib/pods/perl56delta.html">perl56delta</a>.pod
  pod/<a href="../../lib/pods/perl561delta.html">perl561delta</a>.pod pod/<a href="../../lib/pods/perl570delta.html">perl570delta</a>.pod pod/<a href="../../lib/pods/perl572delta.html">perl572delta</a>.pod
  pod/<a href="../../lib/pods/perl573delta.html">perl573delta</a>.pod pod/<a href="../../lib/pods/perl58delta.html">perl58delta</a>.pod pod/<a href="../../lib/pods/perl581delta.html">perl581delta</a>.pod
  pod/<a href="../../lib/pods/perl590delta.html">perl590delta</a>.pod pod/<a href="../../lib/pods/perlhist.html">perlhist</a>.pod pod/<a href="../../lib/pods/perlmodlib.html">perlmodlib</a>.pod
  pod/<a href="../../lib/pods/perltoc.html">perltoc</a>.pod pod.lst Porting/Glossary Porting/repository.pod
  Porting/checkAUTHORS.pl
  ext/Compress/Raw/Zlib/Changes ext/Compress/Raw/Zlib/README
  ext/Compress/Zlib/Changes ext/Cwd/Changes ext/DB_File/Changes
  ext/Encode/Changes ext/Sys/Syslog/Changes ext/Time/HiRes/Changes
  ext/Win32API/File/Changes lib/CGI/Changes lib/ExtUtils/CBuilder/Changes
  lib/ExtUtils/Changes lib/ExtUtils/NOTES lib/ExtUtils/PATCHING
  lib/ExtUtils/README lib/Module/Build/Changes lib/Net/Ping/Changes
  lib/Test/Harness/Changes
  lib/Term/ANSIColor/ChangeLog lib/Term/ANSIColor/README
  README.symbian symbian/TODO</pre>
</dd>
<dt><strong><a name="build_configure_make_install" class="item">Build, Configure, Make, Install</a></strong>

<dd>
<pre>
  cygwin/Makefile.SHs
  ext/IPC/SysV/hints/cygwin.pl
  ext/NDBM_File/hints/cygwin.pl
  ext/ODBM_File/hints/cygwin.pl
  hints/cygwin.sh
  Configure             - help finding hints from uname,
                          shared libperl required for dynamic loading
  Makefile.SH Cross/Makefile-cross-SH
                        - linklibperl
  Porting/patchls       - cygwin in port list
  installman            - man pages with :: translated to .
  installperl           - install dll, install to 'pods'
  makedepend.SH         - uwinfix
  regen_lib.pl          - file permissions</pre>
</dd>
<dd>
<pre>
  NetWare/Makefile
  plan9/mkfile
  symbian/sanity.pl symbian/sisify.pl
  hints/uwin.sh
  vms/descrip_mms.template
  win32/Makefile win32/makefile.mk</pre>
</dd>
<dt><strong><a name="tests2" class="item">Tests</a></strong>

<dd>
<pre>
  t/io/fs.t             - no file mode checks if not ntsec
                          skip rename() check when not check_case:relaxed
  t/io/tell.t           - binmode
  t/lib/cygwin.t        - builtin cygwin function tests
  t/op/groups.t         - basegroup has ID = 0
  t/op/magic.t          - $^X/symlink WORKAROUND, s/.exe//
  t/op/stat.t           - no /dev, skip Win32 ftCreationTime quirk
                          (cache manager sometimes preserves ctime of file
                          previously created and deleted), no -u (setuid)
  t/op/taint.t          - can't use empty path under Cygwin Perl
  t/op/time.t           - no tzset()</pre>
</dd>
<dt><strong><a name="compiled_perl_source" class="item">Compiled Perl Source</a></strong>

<dd>
<pre>
  EXTERN.h              - __declspec(dllimport)
  XSUB.h                - __declspec(dllexport)
  cygwin/cygwin.c       - os_extras (getcwd, spawn, and several Cygwin:: functions)
  perl.c                - os_extras, -i.bak
  perl.h                - binmode
  doio.c                - win9x can not rename a file when it is open
  pp_sys.c              - do not define h_errno, init _pwent_struct.pw_comment
  util.c                - use setenv
  util.h                - PERL_FILE_IS_ABSOLUTE macro
  pp.c                  - Comment about Posix vs IEEE math under Cygwin
  perlio.c              - CR/LF mode
  <a href="../../lib/pods/perliol.html">perliol</a>.c             - Comment about EXTCONST under Cygwin</pre>
</dd>
<dt><strong><a name="compiled_module_source" class="item">Compiled Module Source</a></strong>

<dd>
<pre>
  ext/Compress/Raw/Zlib/Makefile.PL
                        - Can't install via CPAN shell under Cygwin
  ext/Compress/Raw/Zlib/zlib-src/zutil.h
                        - Cygwin is Unix-like and has vsnprintf
  ext/Errno/Errno_pm.PL - Special handling for Win32 Perl under Cygwin
  ext/POSIX/POSIX.xs    - tzname defined externally
  ext/SDBM_File/sdbm/pair.c
                        - EXTCONST needs to be redefined from EXTERN.h
  ext/SDBM_File/sdbm/sdbm.c
                        - binary open
  ext/Sys/Syslog/Syslog.xs
                        - Cygwin has syslog.h
  ext/Sys/Syslog/win32/compile.pl
                        - Convert paths to Windows paths
  ext/Time/HiRes/HiRes.xs
                        - Various timers not available
  ext/Time/HiRes/Makefile.PL
                        - Find w32api/windows.h
  ext/Win32/Makefile.PL - Use various libraries under Cygwin
  ext/Win32/Win32.xs    - Child dir and child env under Cygwin
  ext/Win32API/File/File.xs
                        - _open_osfhandle not implemented under Cygwin
  ext/Win32CORE/Win32CORE.c
                        - __declspec(dllexport)</pre>
</dd>
<dt><strong><a name="perl_modules_scripts" class="item">Perl Modules/Scripts</a></strong>

<dd>
<pre>
  ext/B/t/OptreeCheck.pm - Comment about stderr/stdout order under Cygwin
  ext/Digest/SHA/bin/shasum
                        - Use binary mode under Cygwin
  ext/Sys/Syslog/win32/Win32.pm
                        - Convert paths to Windows paths
  ext/Time/HiRes/HiRes.pm
                        - Comment about various timers not available
  ext/Win32API/File/File.pm
                        - _open_osfhandle not implemented under Cygwin
  ext/Win32CORE/Win32CORE.pm
                        - History of Win32CORE under Cygwin
  lib/CGI.pm            - binmode and path separator
  lib/CPANPLUS/Dist/MM.pm - Commented out code that fails under Win32/Cygwin
  lib/CPANPLUS/Internals/Constants/Report.pm
                        - OS classifications
  lib/CPANPLUS/Internals/Constants.pm
                        - Contants for Cygwin
  lib/CPANPLUS/Internals/Report.pm
                        - Example of Cygwin report
  lib/CPANPLUS/Module.pm
                        - Abort if running on old Cygwin version
  lib/Cwd.pm            - hook to internal Cwd::cwd
  lib/ExtUtils/CBuilder/Platform/cygwin.pm
                        - use gcc for ld, and link to libperl.dll.a
  lib/ExtUtils/CBuilder.pm
                        - Cygwin is Unix-like
  lib/ExtUtils/Install.pm - Install and rename issues under Cygwin
  lib/ExtUtils/MM.pm    - OS classifications
  lib/ExtUtils/MM_Any.pm - Example for Cygwin
  lib/ExtUtils/MakeMaker.pm
                        - require MM_Cygwin.pm
  lib/ExtUtils/MM_Cygwin.pm
                        - canonpath, cflags, manifypods, perl_archive
  lib/File/Fetch.pm     - Comment about quotes using a Cygwin example
  lib/File/Find.pm      - on remote drives stat() always sets st_nlink to 1
  lib/File/Spec/Cygwin.pm - case_tolerant
  lib/File/Spec/Unix.pm - preserve //unc
  lib/File/Spec/Win32.pm - References a message on cygwin.com
  lib/File/Spec.pm      - Pulls in lib/File/Spec/Cygwin.pm
  lib/File/Temp.pm      - no directory sticky bit
  lib/Module/Build/Compat.pm - Comment references 'make' under Cygwin
  lib/Module/Build/Platform/cygwin.pm
                        - Use '.' for man page separator
  lib/Module/Build.pm   - Cygwin is Unix-like
  lib/Module/CoreList.pm - List of all module files and versions
  lib/Net/Domain.pm     - No domainname command under Cygwin
  lib/Net/Netrc.pm      - Bypass using stat() under Cygwin
  lib/Net/Ping.pm       - ECONREFUSED is EAGAIN under Cygwin
  lib/Pod/Find.pm       - Set 'pods' dir
  lib/Pod/Perldoc/ToMan.pm - '-c' switch for pod2man
  lib/Pod/Perldoc.pm    - Use 'less' pager, and use .exe extension
  lib/Term/ANSIColor.pm - Cygwin terminal info
  lib/perl5db.pl        - use stdin not /dev/tty
  utils/perlbug.PL      - Add CYGWIN environment variable to report</pre>
</dd>
<dt><strong><a name="perl_module_tests" class="item">Perl Module Tests</a></strong>

<dd>
<pre>
  ext/Compress/Zlib/t/14gzopen.t
  ext/Cwd/t/cwd.t
  ext/DB_File/t/db-btree.t
  ext/DB_File/t/db-hash.t
  ext/DB_File/t/db-recno.t
  ext/DynaLoader/t/DynaLoader.t
  ext/File/Glob/t/basic.t
  ext/GDBM_File/t/gdbm.t
  ext/POSIX/t/sysconf.t
  ext/POSIX/t/time.t
  ext/SDBM_File/t/sdbm.t
  ext/Sys/Syslog/t/syslog.t
  ext/Time/HiRes/t/HiRes.t
  ext/Win32/t/Unicode.t
  ext/Win32API/File/t/file.t
  ext/Win32CORE/t/win32core.t
  lib/AnyDBM_File.t
  lib/Archive/Extract/t/01_Archive-Extract.t
  lib/Archive/Tar/t/02_methods.t
  lib/CPANPLUS/t/05_CPANPLUS-Internals-Fetch.t
  lib/CPANPLUS/t/20_CPANPLUS-Dist-MM.t
  lib/ExtUtils/t/Embed.t
  lib/ExtUtils/t/eu_command.t
  lib/ExtUtils/t/MM_Cygwin.t
  lib/ExtUtils/t/MM_Unix.t
  lib/File/Compare.t
  lib/File/Copy.t
  lib/File/Find/t/find.t
  lib/File/Path.t
  lib/File/Spec/t/crossplatform.t
  lib/File/Spec/t/Spec.t
  lib/Module/Build/t/destinations.t
  lib/Net/hostent.t
  lib/Net/Ping/t/110_icmp_inst.t
  lib/Net/Ping/t/500_ping_icmp.t
  lib/Net/t/netrc.t
  lib/Pod/Simple/t/perlcyg.pod
  lib/Pod/Simple/t/perlcygo.txt
  lib/Pod/Simple/t/<a href="../../lib/pods/perlfaq.html">perlfaq</a>.pod
  lib/Pod/Simple/t/perlfaqo.txt
  lib/User/grent.t
  lib/User/pwent.t</pre>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="bugs_on_cygwin">BUGS ON CYGWIN</a></h1>
<p>Support for swapping real and effective user and group IDs is incomplete.
On WinNT Cygwin provides <code>setuid()</code>, <code>seteuid()</code>, <code>setgid()</code> and <code>setegid()</code>.
However, additional Cygwin calls for manipulating WinNT access tokens
and security contexts are required.</p>
<p>
</p>
<hr />
<h1><a name="authors">AUTHORS</a></h1>
<p>Charles Wilson &lt;<a href="mailto:cwilson@ece.gatech.edu">cwilson@ece.gatech.edu</a>&gt;,
Eric Fifer &lt;<a href="mailto:egf7@columbia.edu">egf7@columbia.edu</a>&gt;,
alexander smishlajev &lt;<a href="mailto:als@turnhere.com">als@turnhere.com</a>&gt;,
Steven Morlock &lt;<a href="mailto:newspost@morlock.net">newspost@morlock.net</a>&gt;,
Sebastien Barre &lt;<a href="mailto:Sebastien.Barre@utc.fr">Sebastien.Barre@utc.fr</a>&gt;,
Teun Burgers &lt;<a href="mailto:burgers@ecn.nl">burgers@ecn.nl</a>&gt;,
Gerrit P. Haase &lt;<a href="mailto:gp@familiehaase.de">gp@familiehaase.de</a>&gt;,
Reini Urban &lt;<a href="mailto:rurban@cpan.org">rurban@cpan.org</a>&gt;,
Jan Dubois &lt;<a href="mailto:jand@activestate.com">jand@activestate.com</a>&gt;,
Jerry D. Hedden &lt;<a href="mailto:jdhedden@cpan.org">jdhedden@cpan.org</a>&gt;.</p>
<p>
</p>
<hr />
<h1><a name="history">HISTORY</a></h1>
<p>Last updated: 2007-09-25</p>

</body>

</html>
