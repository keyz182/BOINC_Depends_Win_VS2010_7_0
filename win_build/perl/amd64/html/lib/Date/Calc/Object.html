<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../../displayToc.js"></script>
<script language="JavaScript" src="../../../tocParas.js"></script>
<script language="JavaScript" src="../../../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../../../scineplex.css">
<title>Date::Calc::Object - Object-oriented add-on for Date::Calc with overloaded operators</title>
<link rel="stylesheet" href="../../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>


<!-- INDEX BEGIN -->
<div name="index">
<script>writelinks('__top__',3);</script>
<h1><a>Date::Calc::Object - Object-oriented add-on for Date::Calc with overloaded operators</a></h1>
<p><a name="__index__"></a></p>


<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#motto">MOTTO</a></li>
	<li><a href="#preface">PREFACE</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<ul>

		<li><a href="#export_tags">Export tags</a></li>
		<li><a href="#functions">Functions</a></li>
		<li><a href="#methods">Methods</a></li>
		<li><a href="#overloaded_operators">Overloaded Operators</a></li>
		<li><a href="#comparison_operators_">Comparison Operators:</a></li>
		<li><a href="#plus_">Plus:</a></li>
		<li><a href="#unary_minus_">Unary Minus:</a></li>
		<li><a href="#minus_">Minus:</a></li>
		<li><a href="#miscellaneous_operators_">Miscellaneous Operators:</a></li>
	</ul>

	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#examples">EXAMPLES</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#version">VERSION</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
	<li><a href="#license">LICENSE</a></li>
	<li><a href="#disclaimer">DISCLAIMER</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Date::Calc::Object - Object-oriented add-on for Date::Calc with overloaded operators</p>
<p>
</p>
<hr />
<h1><a name="motto">MOTTO</a></h1>
<p>Make frequent things easy and infrequent or hard things possible</p>
<p>
</p>
<hr />
<h1><a name="preface">PREFACE</a></h1>
<p>Note that you do <strong>NOT</strong> need to &quot;<code>use Date::Calc qw(...);</code>&quot; in
addition to this module.</p>
<p>Simply</p>
<pre>
  <span class="keyword">use</span> <span class="variable">Date::Calc::Object</span> <span class="string">qw(...)</span><span class="operator">;</span>
</pre>
<p><strong>INSTEAD OF</strong></p>
<pre>
  <span class="keyword">use</span> <span class="variable">Date::Calc</span> <span class="string">qw(...)</span><span class="operator">;</span>
</pre>
<p>with the same &quot;<code>qw(...)</code>&quot; as you would with the &quot;Date::Calc&quot;
module, and then forget about &quot;Date::Calc::Object&quot; altogether.</p>
<p>The rest of your existing code doesn't change at all.</p>
<p>Note also that in order to create a new date object, you do not
need to use</p>
<pre>
  <span class="variable">$date_object</span> <span class="operator">=</span> <span class="variable">Date::Calc::Object</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(...);</span>
</pre>
<p>(but you may), and should use</p>
<pre>
  <span class="variable">$date_object</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(...);</span>
</pre>
<p>instead (saves you some typing and is a trifle faster).</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>
</p>
<h2><a name="export_tags">Export tags</a></h2>
<pre>
  :all  -  all functions from Date::Calc
  :aux  -  auxiliary functions shift_*
  :ALL  -  both :all and :aux</pre>
<p>
</p>
<h2><a name="functions">Functions</a></h2>
<p>See <a href="../../../Date/Calc(3).html">the Date::Calc(3) manpage</a> for a list of available functions.</p>
<pre>
  <span class="variable">$year</span>                          <span class="operator">=</span> <span class="variable">shift_year</span><span class="operator">(\</span><span class="variable">@_</span><span class="operator">);</span>
  <span class="operator">(</span><span class="variable">$year</span><span class="operator">,</span><span class="variable">$mm</span><span class="operator">,</span><span class="variable">$dd</span><span class="operator">)</span>                <span class="operator">=</span> <span class="variable">shift_date</span><span class="operator">(\</span><span class="variable">@_</span><span class="operator">);</span>
  <span class="operator">(</span><span class="variable">$hrs</span><span class="operator">,</span><span class="variable">$min</span><span class="operator">,</span><span class="variable">$sec</span><span class="operator">)</span>               <span class="operator">=</span> <span class="variable">shift_time</span><span class="operator">(\</span><span class="variable">@_</span><span class="operator">);</span>
  <span class="operator">(</span><span class="variable">$year</span><span class="operator">,</span><span class="variable">$mm</span><span class="operator">,</span><span class="variable">$dd</span><span class="operator">,</span><span class="variable">$hrs</span><span class="operator">,</span><span class="variable">$min</span><span class="operator">,</span><span class="variable">$sec</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">shift_datetime</span><span class="operator">(\</span><span class="variable">@_</span><span class="operator">);</span>
</pre>
<p>
</p>
<h2><a name="methods">Methods</a></h2>
<pre>
  <span class="variable">$old</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">accurate_mode</span><span class="operator">(</span><span class="operator">[</span><span class="variable">FLAG</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$old</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">number_format</span><span class="operator">(</span><span class="operator">[</span><span class="variable">NUMBER</span><span class="operator">|</span><span class="variable">CODEREF</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$old</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">delta_format</span><span class="operator">(</span><span class="operator">[</span><span class="variable">NUMBER</span><span class="operator">|</span><span class="variable">CODEREF</span><span class="operator">]</span><span class="operator">);</span>  <span class="comment"># global default</span>
  <span class="variable">$old</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">date_format</span><span class="operator">(</span><span class="operator">[</span><span class="variable">NUMBER</span><span class="operator">|</span><span class="variable">CODEREF</span><span class="operator">]</span><span class="operator">);</span>   <span class="comment"># global default</span>
  <span class="variable">$old</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">language</span><span class="operator">(</span><span class="operator">[</span><span class="variable">LANGUAGE</span><span class="operator">]</span><span class="operator">);</span>            <span class="comment"># global default</span>
</pre>
<pre>
  <span class="variable">$old</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">accurate_mode</span><span class="operator">(</span><span class="operator">[</span><span class="variable">FLAG</span><span class="operator">]</span><span class="operator">);</span>           <span class="comment"># is global nevertheless!</span>
  <span class="variable">$old</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">number_format</span><span class="operator">(</span><span class="operator">[</span><span class="variable">NUMBER</span><span class="operator">|</span><span class="variable">CODEREF</span><span class="operator">]</span><span class="operator">);</span> <span class="comment"># is global nevertheless!</span>
  <span class="variable">$old</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">delta_format</span><span class="operator">(</span><span class="operator">[</span><span class="variable">NUMBER</span><span class="operator">|</span><span class="variable">CODEREF</span><span class="operator">]</span><span class="operator">);</span>  <span class="comment"># individual override</span>
  <span class="variable">$old</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">date_format</span><span class="operator">(</span><span class="operator">[</span><span class="variable">NUMBER</span><span class="operator">|</span><span class="variable">CODEREF</span><span class="operator">]</span><span class="operator">);</span>   <span class="comment"># individual override</span>
  <span class="variable">$old</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">language</span><span class="operator">(</span><span class="operator">[</span><span class="variable">LANGUAGE</span><span class="operator">]</span><span class="operator">);</span>            <span class="comment"># individual override</span>
</pre>
<pre>
  <span class="variable">$flag</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">is_delta</span><span class="operator">();</span>
  <span class="variable">$flag</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">is_date</span><span class="operator">();</span>
  <span class="variable">$flag</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">is_short</span><span class="operator">();</span> <span class="comment"># i.e., has no time part</span>
  <span class="variable">$flag</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">is_long</span><span class="operator">();</span>  <span class="comment"># i.e., has time part</span>
  <span class="variable">$flag</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">is_valid</span><span class="operator">();</span>
</pre>
<pre>
  <span class="variable">$date</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="operator">[</span><span class="variable">TYPE</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$date</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="operator">[</span><span class="variable">TYPE</span><span class="operator">,</span><span class="operator">]</span><span class="variable">YEAR</span><span class="operator">,</span><span class="variable">MONTH</span><span class="operator">,</span><span class="variable">DAY</span><span class="operator">[</span><span class="operator">,</span><span class="variable">HRS</span><span class="operator">,</span><span class="variable">MIN</span><span class="operator">,</span><span class="variable">SEC</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$date</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="variable">$arrayref</span><span class="operator">);</span>
  <span class="variable">$newdate</span> <span class="operator">=</span> <span class="variable">$somedate</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="operator">[</span><span class="variable">TYPE</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$newdate</span> <span class="operator">=</span> <span class="variable">$somedate</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="operator">[</span><span class="variable">TYPE</span><span class="operator">,</span><span class="operator">]</span><span class="variable">YEAR</span><span class="operator">,</span><span class="variable">MONTH</span><span class="operator">,</span><span class="variable">DAY</span><span class="operator">[</span><span class="operator">,</span><span class="variable">HRS</span><span class="operator">,</span><span class="variable">MIN</span><span class="operator">,</span><span class="variable">SEC</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$newdate</span> <span class="operator">=</span> <span class="variable">$somedate</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="variable">$arrayref</span><span class="operator">);</span>
</pre>
<pre>
  <span class="variable">$datecopy</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">clone</span><span class="operator">();</span>
  <span class="variable">$targetdate</span><span class="operator">-&gt;</span><span class="variable">copy</span><span class="operator">(</span><span class="variable">$sourcedate</span><span class="operator">);</span>
  <span class="variable">$targetdate</span><span class="operator">-&gt;</span><span class="variable">copy</span><span class="operator">(</span><span class="variable">$arrayref</span><span class="operator">);</span>
  <span class="variable">$targetdate</span><span class="operator">-&gt;</span><span class="variable">copy</span><span class="operator">(</span><span class="variable">@list</span><span class="operator">);</span>
</pre>
<pre>
  <span class="operator">(</span><span class="variable">$year</span><span class="operator">,</span><span class="variable">$month</span><span class="operator">,</span><span class="variable">$day</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">date</span><span class="operator">(</span><span class="operator">[</span><span class="variable">TYPE</span><span class="operator">]</span><span class="operator">);</span>
  <span class="operator">(</span><span class="variable">$year</span><span class="operator">,</span><span class="variable">$month</span><span class="operator">,</span><span class="variable">$day</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">date</span><span class="operator">(</span><span class="operator">[</span><span class="variable">TYPE</span><span class="operator">,</span><span class="operator">]</span><span class="variable">YEAR</span><span class="operator">,</span><span class="variable">MONTH</span><span class="operator">,</span><span class="variable">DAY</span><span class="operator">[</span><span class="operator">,</span><span class="variable">HRS</span><span class="operator">,</span><span class="variable">MIN</span><span class="operator">,</span><span class="variable">SEC</span><span class="operator">]</span><span class="operator">);</span>
  <span class="operator">(</span><span class="variable">$year</span><span class="operator">,</span><span class="variable">$month</span><span class="operator">,</span><span class="variable">$day</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">date</span><span class="operator">(</span><span class="variable">$arrayref</span><span class="operator">);</span>
  <span class="operator">(</span><span class="operator">[</span><span class="variable">$hrs</span><span class="operator">,</span><span class="variable">$min</span><span class="operator">,</span><span class="variable">$sec</span><span class="operator">]</span><span class="operator">)</span>  <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">time</span><span class="operator">(</span><span class="operator">[</span><span class="variable">TYPE</span><span class="operator">]</span><span class="operator">);</span>
  <span class="operator">(</span><span class="variable">$hrs</span><span class="operator">,</span><span class="variable">$min</span><span class="operator">,</span><span class="variable">$sec</span><span class="operator">)</span>    <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">time</span><span class="operator">(</span><span class="operator">[</span><span class="variable">TYPE</span><span class="operator">,</span><span class="operator">]</span><span class="variable">HRS</span><span class="operator">,</span><span class="variable">MIN</span><span class="operator">,</span><span class="variable">SEC</span><span class="operator">);</span>
  <span class="operator">(</span><span class="operator">[</span><span class="variable">$hrs</span><span class="operator">,</span><span class="variable">$min</span><span class="operator">,</span><span class="variable">$sec</span><span class="operator">]</span><span class="operator">)</span>  <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">time</span><span class="operator">(</span><span class="variable">$arrayref</span><span class="operator">);</span>
</pre>
<pre>
  <span class="operator">(</span><span class="variable">$year</span><span class="operator">,</span><span class="variable">$month</span><span class="operator">,</span><span class="variable">$day</span><span class="operator">,</span><span class="variable">$hrs</span><span class="operator">,</span><span class="variable">$min</span><span class="operator">,</span><span class="variable">$sec</span><span class="operator">)</span> <span class="operator">=</span>
      <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">datetime</span><span class="operator">(</span><span class="operator">[</span><span class="variable">TYPE</span><span class="operator">]</span><span class="operator">);</span>
  <span class="operator">(</span><span class="variable">$year</span><span class="operator">,</span><span class="variable">$month</span><span class="operator">,</span><span class="variable">$day</span><span class="operator">,</span><span class="variable">$hrs</span><span class="operator">,</span><span class="variable">$min</span><span class="operator">,</span><span class="variable">$sec</span><span class="operator">)</span> <span class="operator">=</span>
      <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">datetime</span><span class="operator">(</span><span class="operator">[</span><span class="variable">TYPE</span><span class="operator">,</span><span class="operator">]</span><span class="variable">YEAR</span><span class="operator">,</span><span class="variable">MONTH</span><span class="operator">,</span><span class="variable">DAY</span><span class="operator">[</span><span class="operator">,</span><span class="variable">HRS</span><span class="operator">,</span><span class="variable">MIN</span><span class="operator">,</span><span class="variable">SEC</span><span class="operator">]</span><span class="operator">);</span>
</pre>
<pre>
  <span class="variable">$date</span>  <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">today</span><span class="operator">(</span><span class="operator">[</span><span class="variable">FLAG</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$date</span>  <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">now</span><span class="operator">(</span><span class="operator">[</span><span class="variable">FLAG</span><span class="operator">]</span><span class="operator">);</span> <span class="comment"># shorthand for --+</span>
  <span class="variable">$date</span>  <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">today_and_now</span><span class="operator">(</span><span class="operator">[</span><span class="variable">FLAG</span><span class="operator">]</span><span class="operator">);</span> <span class="comment"># &lt;-----+</span>
  <span class="variable">$date</span>  <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">gmtime</span><span class="operator">(</span><span class="operator">[</span><span class="keyword">time</span><span class="operator">]</span><span class="operator">);</span>    <span class="comment"># UTC/GMT</span>
  <span class="variable">$date</span>  <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">localtime</span><span class="operator">(</span><span class="operator">[</span><span class="keyword">time</span><span class="operator">]</span><span class="operator">);</span> <span class="comment"># local time</span>
  <span class="variable">$delta</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">tzoffset</span><span class="operator">(</span><span class="operator">[</span><span class="keyword">time</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$date</span>  <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">time2date</span><span class="operator">(</span><span class="operator">[</span><span class="keyword">time</span><span class="operator">]</span><span class="operator">);</span> <span class="comment"># UTC/GMT</span>
</pre>
<pre>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">today</span><span class="operator">(</span><span class="operator">[</span><span class="variable">FLAG</span><span class="operator">]</span><span class="operator">);</span>         <span class="comment"># updates the date part only</span>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">now</span><span class="operator">(</span><span class="operator">[</span><span class="variable">FLAG</span><span class="operator">]</span><span class="operator">);</span>           <span class="comment"># updates the time part only</span>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">today_and_now</span><span class="operator">(</span><span class="operator">[</span><span class="variable">FLAG</span><span class="operator">]</span><span class="operator">);</span> <span class="comment"># updates both date and time</span>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">gmtime</span><span class="operator">(</span><span class="operator">[</span><span class="keyword">time</span><span class="operator">]</span><span class="operator">);</span>        <span class="comment"># updates both date and time (UTC/GMT)</span>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">localtime</span><span class="operator">(</span><span class="operator">[</span><span class="keyword">time</span><span class="operator">]</span><span class="operator">);</span>     <span class="comment"># updates both date and time (local time)</span>
  <span class="variable">$delta</span><span class="operator">-&gt;</span><span class="variable">tzoffset</span><span class="operator">(</span><span class="operator">[</span><span class="keyword">time</span><span class="operator">]</span><span class="operator">);</span>     <span class="comment"># updates both date and time</span>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">time2date</span><span class="operator">(</span><span class="operator">[</span><span class="keyword">time</span><span class="operator">]</span><span class="operator">);</span>     <span class="comment"># updates both date and time (UTC/GMT)</span>
</pre>
<pre>
  <span class="variable">$time</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">mktime</span><span class="operator">();</span>    <span class="comment"># same as "$time = CORE::time();"</span>
  <span class="variable">$time</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">date2time</span><span class="operator">();</span> <span class="comment"># same as "$time = CORE::time();"</span>
</pre>
<pre>
  <span class="variable">$time</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">mktime</span><span class="operator">();</span>      <span class="comment"># converts into Unix time (local time)</span>
  <span class="variable">$time</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">date2time</span><span class="operator">();</span>   <span class="comment"># converts into Unix time (UTC/GMT)</span>
</pre>
<pre>
  <span class="variable">$year</span>    <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">year</span><span class="operator">(</span><span class="operator">[</span><span class="variable">YEAR</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$month</span>   <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">month</span><span class="operator">(</span><span class="operator">[</span><span class="variable">MONTH</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$day</span>     <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">day</span><span class="operator">(</span><span class="operator">[</span><span class="variable">DAY</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$hours</span>   <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">hours</span><span class="operator">(</span><span class="operator">[</span><span class="variable">HRS</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$minutes</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">minutes</span><span class="operator">(</span><span class="operator">[</span><span class="variable">MIN</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$seconds</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">seconds</span><span class="operator">(</span><span class="operator">[</span><span class="variable">SEC</span><span class="operator">]</span><span class="operator">);</span>
</pre>
<pre>
  <span class="variable">$number</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">number</span><span class="operator">(</span><span class="operator">[</span><span class="variable">NUMBER</span><span class="operator">|</span><span class="variable">CODEREF</span><span class="operator">]</span><span class="operator">);</span>
  <span class="variable">$string</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">string</span><span class="operator">(</span><span class="operator">[</span><span class="variable">NUMBER</span><span class="operator">|</span><span class="variable">CODEREF</span><span class="operator">][</span><span class="operator">,</span><span class="variable">LANGUAGE</span><span class="operator">]</span><span class="operator">);</span>
</pre>
<pre>
  <span class="variable">$delta</span><span class="operator">-&gt;</span><span class="variable">normalize</span><span class="operator">();</span> <span class="comment"># renormalizes a delta vector</span>
</pre>
<p>
</p>
<h2><a name="overloaded_operators">Overloaded Operators</a></h2>
<pre>
  <span class="comment">#####################################################</span>
  <span class="comment"># Scalar operands are always converted into a delta #</span>
  <span class="comment"># vector with that many days, i.e., [1,0,0,SCALAR]  #</span>
  <span class="comment">#####################################################</span>
</pre>
<p>
</p>
<h2><a name="comparison_operators_">Comparison Operators:</a></h2>
<pre>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date1</span> <span class="operator">&lt;</span>  <span class="variable">$date2</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># compares date part only</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date1</span> <span class="operator">&lt;=</span> <span class="variable">$date2</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># compares date part only</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date1</span> <span class="operator">&gt;</span>  <span class="variable">$date2</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># compares date part only</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date1</span> <span class="operator">&gt;=</span> <span class="variable">$date2</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># compares date part only</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date1</span> <span class="operator">==</span> <span class="variable">$date2</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># compares date part only</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date1</span> <span class="operator">!=</span> <span class="variable">$date2</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># compares date part only</span>
</pre>
<pre>
  <span class="variable">$comp</span> <span class="operator">=</span> <span class="variable">$date1</span> <span class="operator">&lt;=&gt;</span> <span class="variable">$date2</span><span class="operator">;</span> <span class="comment"># compares date part only</span>
</pre>
<pre>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date1</span> <span class="keyword">lt</span> <span class="variable">$date2</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># compares both date and time</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date1</span> <span class="keyword">le</span> <span class="variable">$date2</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># compares both date and time</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date1</span> <span class="keyword">gt</span> <span class="variable">$date2</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># compares both date and time</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date1</span> <span class="keyword">ge</span> <span class="variable">$date2</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># compares both date and time</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date1</span> <span class="keyword">eq</span> <span class="variable">$date2</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># compares both date and time</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date1</span> <span class="keyword">ne</span> <span class="variable">$date2</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># compares both date and time</span>
</pre>
<pre>
  <span class="variable">$comp</span> <span class="operator">=</span> <span class="variable">$date1</span> <span class="keyword">cmp</span> <span class="variable">$date2</span><span class="operator">;</span> <span class="comment"># compares both date and time</span>
</pre>
<p>Note that you can of course also compare two deltas,
but not a date and a delta!</p>
<pre>
  <span class="comment">##################################################</span>
  <span class="comment"># Default TYPE for array refs in comparisons is: #</span>
  <span class="comment"># Same as other operand                          #</span>
  <span class="comment">##################################################</span>
</pre>
<pre>
  <span class="keyword">if</span> <span class="operator">(</span><span class="operator">[</span><span class="number">2000</span><span class="operator">,</span><span class="number">4</span><span class="operator">,</span><span class="number">1</span><span class="operator">]</span> <span class="operator">==</span> <span class="variable">$date</span><span class="operator">)</span> <span class="operator">{</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$today</span> <span class="operator">&gt;</span> <span class="operator">[</span><span class="number">2000</span><span class="operator">,</span><span class="number">4</span><span class="operator">,</span><span class="number">1</span><span class="operator">]</span><span class="operator">)</span> <span class="operator">{</span>
</pre>
<pre>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$now</span> <span class="keyword">ge</span> <span class="operator">[</span><span class="number">2000</span><span class="operator">,</span><span class="number">3</span><span class="operator">,</span><span class="number">26</span><span class="operator">,</span><span class="number">2</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">]</span><span class="operator">)</span> <span class="operator">{</span>
</pre>
<pre>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$delta</span> <span class="operator">==</span> <span class="operator">[</span><span class="number">18</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">]</span><span class="operator">)</span> <span class="operator">{</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$delta</span> <span class="operator">==</span> <span class="operator">-</span><span class="number">1</span><span class="operator">)</span> <span class="operator">{</span>
</pre>
<p>
</p>
<h2><a name="plus_">Plus:</a></h2>
<pre>
  <span class="variable">$date2</span> <span class="operator">=</span> <span class="variable">$date1</span> <span class="operator">+</span> <span class="variable">$delta</span><span class="operator">;</span>
  <span class="variable">$date2</span> <span class="operator">=</span> <span class="variable">$delta</span> <span class="operator">+</span> <span class="variable">$date1</span><span class="operator">;</span>
  <span class="variable">$date</span> <span class="operator">+=</span> <span class="variable">$delta</span><span class="operator">;</span>
  <span class="variable">$this</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">++;</span>
  <span class="variable">$next</span> <span class="operator">=</span> <span class="operator">++</span><span class="variable">$date</span><span class="operator">;</span>
</pre>
<pre>
  <span class="variable">$delta3</span> <span class="operator">=</span> <span class="variable">$delta1</span> <span class="operator">+</span> <span class="variable">$delta2</span><span class="operator">;</span>
  <span class="variable">$delta1</span> <span class="operator">+=</span> <span class="variable">$delta2</span><span class="operator">;</span>
  <span class="variable">$delta</span> <span class="operator">+=</span> <span class="variable">$date</span><span class="operator">;</span> <span class="comment"># beware of implicit type change!</span>
  <span class="variable">$delta</span><span class="operator">++;</span>
  <span class="operator">++</span><span class="variable">$delta</span><span class="operator">;</span>
</pre>
<pre>
  <span class="comment">#####################################################</span>
  <span class="comment"># Default TYPE for array refs in '+' operations is: #</span>
  <span class="comment"># Opposite of other operand                         #</span>
  <span class="comment">#####################################################</span>
</pre>
<pre>
  <span class="variable">$date2</span> <span class="operator">=</span> <span class="operator">[</span><span class="number">2000</span><span class="operator">,</span><span class="number">3</span><span class="operator">,</span><span class="number">26</span><span class="operator">]</span> <span class="operator">+</span> <span class="variable">$delta</span><span class="operator">;</span>
  <span class="variable">$date2</span> <span class="operator">=</span> <span class="variable">$date1</span> <span class="operator">+</span> <span class="operator">[</span><span class="operator">+</span><span class="number">1</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">]</span><span class="operator">;</span>
  <span class="variable">$date2</span> <span class="operator">=</span> <span class="operator">[</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">,-</span><span class="number">1</span><span class="operator">]</span> <span class="operator">+</span> <span class="variable">$date1</span><span class="operator">;</span>
  <span class="variable">$date2</span> <span class="operator">=</span> <span class="variable">$date1</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">;</span>
  <span class="variable">$date</span> <span class="operator">+=</span> <span class="operator">[</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">,+</span><span class="number">1</span><span class="operator">]</span><span class="operator">;</span>
  <span class="variable">$date</span> <span class="operator">+=</span> <span class="number">2</span><span class="operator">;</span>
</pre>
<pre>
  <span class="variable">$delta3</span> <span class="operator">=</span> <span class="operator">[</span><span class="number">1</span><span class="operator">,+</span><span class="number">1</span><span class="operator">,</span><span class="number">0</span><span class="operator">,-</span><span class="number">1</span><span class="operator">]</span> <span class="operator">+</span> <span class="variable">$delta2</span><span class="operator">;</span>
  <span class="variable">$delta3</span> <span class="operator">=</span> <span class="variable">$delta1</span> <span class="operator">+</span> <span class="operator">[</span><span class="number">1</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">,+</span><span class="number">1</span><span class="operator">]</span><span class="operator">;</span>
  <span class="variable">$delta3</span> <span class="operator">=</span> <span class="variable">$delta1</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">;</span>
  <span class="variable">$delta</span> <span class="operator">+=</span> <span class="operator">[</span><span class="number">1</span><span class="operator">,</span><span class="number">0</span><span class="operator">,+</span><span class="number">1</span><span class="operator">,</span><span class="number">0</span><span class="operator">]</span><span class="operator">;</span>
  <span class="variable">$delta</span> <span class="operator">+=</span> <span class="operator">[</span><span class="number">2000</span><span class="operator">,</span><span class="number">3</span><span class="operator">,</span><span class="number">26</span><span class="operator">]</span><span class="operator">;</span> <span class="comment"># beware of implicit type change!</span>
  <span class="variable">$delta</span> <span class="operator">+=</span> <span class="number">7</span><span class="operator">;</span>
</pre>
<p>
</p>
<h2><a name="unary_minus_">Unary Minus:</a></h2>
<pre>
  <span class="variable">$delta2</span> <span class="operator">=</span> <span class="operator">-</span><span class="variable">$delta1</span><span class="operator">;</span>
</pre>
<p>
</p>
<h2><a name="minus_">Minus:</a></h2>
<pre>
  <span class="variable">$delta</span> <span class="operator">=</span> <span class="variable">$date2</span> <span class="operator">-</span> <span class="variable">$date1</span><span class="operator">;</span>
  <span class="variable">$date2</span> <span class="operator">=</span> <span class="variable">$date1</span> <span class="operator">-</span> <span class="variable">$delta</span><span class="operator">;</span>
  <span class="variable">$date</span> <span class="operator">-=</span> <span class="variable">$delta</span><span class="operator">;</span>
  <span class="variable">$date2</span> <span class="operator">-=</span> <span class="variable">$date1</span><span class="operator">;</span> <span class="comment"># beware of implicit type change!</span>
  <span class="variable">$this</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">--;</span>
  <span class="variable">$prev</span> <span class="operator">=</span> <span class="operator">--</span><span class="variable">$date</span><span class="operator">;</span>
</pre>
<pre>
  <span class="variable">$delta3</span> <span class="operator">=</span> <span class="variable">$delta2</span> <span class="operator">-</span> <span class="variable">$delta1</span><span class="operator">;</span>
  <span class="variable">$delta2</span> <span class="operator">-=</span> <span class="variable">$delta1</span><span class="operator">;</span>
  <span class="variable">$delta</span><span class="operator">--;</span>
  <span class="operator">--</span><span class="variable">$delta</span><span class="operator">;</span>
</pre>
<pre>
  <span class="comment">#####################################################</span>
  <span class="comment"># Default TYPE for array refs in '-' operations is: #</span>
  <span class="comment"># Always a date                                     #</span>
  <span class="comment">#####################################################</span>
</pre>
<pre>
  <span class="variable">$delta</span> <span class="operator">=</span> <span class="variable">$today</span> <span class="operator">-</span> <span class="operator">[</span><span class="number">2000</span><span class="operator">,</span><span class="number">3</span><span class="operator">,</span><span class="number">26</span><span class="operator">]</span><span class="operator">;</span>
  <span class="variable">$delta</span> <span class="operator">=</span> <span class="operator">[</span><span class="number">2000</span><span class="operator">,</span><span class="number">4</span><span class="operator">,</span><span class="number">1</span><span class="operator">]</span> <span class="operator">-</span> <span class="variable">$date</span><span class="operator">;</span>
  <span class="variable">$date2</span> <span class="operator">=</span> <span class="operator">[</span><span class="number">2000</span><span class="operator">,</span><span class="number">3</span><span class="operator">,</span><span class="number">26</span><span class="operator">]</span> <span class="operator">-</span> <span class="variable">$delta</span><span class="operator">;</span>
  <span class="variable">$date2</span> <span class="operator">=</span> <span class="variable">$date1</span> <span class="operator">-</span> <span class="operator">[</span><span class="number">1</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">,+</span><span class="number">7</span><span class="operator">]</span><span class="operator">;</span>
  <span class="variable">$date2</span> <span class="operator">=</span> <span class="variable">$date1</span> <span class="operator">-</span> <span class="number">7</span><span class="operator">;</span>
  <span class="variable">$date</span> <span class="operator">-=</span> <span class="operator">[</span><span class="number">1</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">,+</span><span class="number">1</span><span class="operator">]</span><span class="operator">;</span> <span class="comment"># better add [0,0,-1] instead!</span>
  <span class="variable">$date2</span> <span class="operator">-=</span> <span class="operator">[</span><span class="number">2000</span><span class="operator">,</span><span class="number">3</span><span class="operator">,</span><span class="number">26</span><span class="operator">]</span><span class="operator">;</span> <span class="comment"># beware of implicit type change!</span>
  <span class="variable">$date2</span> <span class="operator">-=</span> <span class="number">1</span><span class="operator">;</span>
</pre>
<pre>
  <span class="variable">$delta3</span> <span class="operator">=</span> <span class="operator">[</span><span class="number">1</span><span class="operator">,</span><span class="number">0</span><span class="operator">,+</span><span class="number">1</span><span class="operator">,</span><span class="number">0</span><span class="operator">]</span> <span class="operator">-</span> <span class="variable">$delta1</span><span class="operator">;</span>
  <span class="variable">$delta3</span> <span class="operator">=</span> <span class="variable">$delta2</span> <span class="operator">-</span> <span class="operator">[</span><span class="number">1</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">,-</span><span class="number">1</span><span class="operator">]</span><span class="operator">;</span>
  <span class="variable">$delta</span> <span class="operator">-=</span> <span class="operator">[</span><span class="number">1</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">,+</span><span class="number">1</span><span class="operator">]</span><span class="operator">;</span>
  <span class="variable">$delta</span> <span class="operator">-=</span> <span class="number">7</span><span class="operator">;</span>
</pre>
<p>
</p>
<h2><a name="miscellaneous_operators_">Miscellaneous Operators:</a></h2>
<pre>
  <span class="variable">$string</span> <span class="operator">=</span> <span class="string">"</span><span class="variable">$date</span><span class="string">"</span><span class="operator">;</span>
  <span class="variable">$string</span> <span class="operator">=</span> <span class="string">"</span><span class="variable">$delta</span><span class="string">"</span><span class="operator">;</span>
</pre>
<pre>
  <span class="keyword">print</span> <span class="string">"</span><span class="variable">$date</span><span class="string">\n"</span><span class="operator">;</span>
  <span class="keyword">print</span> <span class="string">"</span><span class="variable">$delta</span><span class="string">\n"</span><span class="operator">;</span>
</pre>
<pre>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># date is valid</span>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$delta</span><span class="operator">)</span> <span class="operator">{</span> <span class="comment"># delta is valid</span>
</pre>
<pre>
  <span class="variable">$days</span> <span class="operator">=</span> <span class="keyword">abs</span><span class="operator">(</span><span class="variable">$date</span><span class="operator">);</span>
  <span class="variable">$diff</span> <span class="operator">=</span> <span class="keyword">abs</span><span class="operator">(</span><span class="variable">$delta</span><span class="operator">);</span> <span class="comment"># can be negative!</span>
</pre>
<pre>
  <span class="variable">$diff</span> <span class="operator">=</span> <span class="keyword">abs</span><span class="operator">(</span><span class="keyword">abs</span><span class="operator">(</span><span class="variable">$delta</span><span class="operator">));</span> <span class="comment"># always positive</span>
</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<ul>
<li>
<p>FLAG</p>
<p>&quot;FLAG&quot; is either 0 (for &quot;false&quot;) or 1 (for &quot;true&quot;).</p>
<p>In the case of &quot;<code>accurate_mode()</code>&quot;, this switches &quot;accurate mode&quot;
on and off (see further below for an explanation of what that is).</p>
<p>In the case of &quot;<code>today()</code>&quot;, &quot;<code>now()</code>&quot; and &quot;<code>today_and_now()</code>&quot;,
a &quot;true&quot; value indicates &quot;GMT&quot; (Greenwich Mean Time), as opposed
to local time, which is the default.</p>
</li>
<li>
<p>NUMBER</p>
<p>&quot;NUMBER&quot; is a number between 0 and 2 (for &quot;number_format()&quot; and &quot;number()&quot;)
or between 0 and 3 (for &quot;delta_format()&quot;, &quot;date_format()&quot; and &quot;string()&quot;),
indicating which of the three/four predefined formats, respectively,
should be used for converting a date into numeric representation
(needed for comparing dates, for instance) or string representation.</p>
<p>Format #0 is the default at startup and the simplest of all (and
should be fastest to calculate, too).</p>
<p>The string representation of dates in format #0 also has the advantage of
being sortable in chronological order (and of complying with ISO&nbsp;8601).</p>
<p>(The numeric formats are (trivially) always sortable in chronological
order of course.)</p>
<p>The other formats are increasingly more sophisticated (in terms of
esthetics and computation time) with increasing number:</p>
<pre>
  Delta number formats (short):</pre>
<pre>
      0    13603
      1    13603
      2    13603</pre>
<pre>
  Delta string formats (short):</pre>
<pre>
      0    '+0+0+13603'
      1    '+0 +0 +13603'
      2    '+0Y +0M +13603D'
      3    '+0 Y +0 M +13603 D'</pre>
<pre>
  Date number formats (short):</pre>
<pre>
      0    20010401
      1    730576
      2    730576</pre>
<pre>
  Date string formats (short):</pre>
<pre>
      0    '20010401'
      1    '01-Apr-2001'
      2    'Sun 1-Apr-2001'
      3    'Sunday, April 1st 2001'</pre>
<pre>
  Delta number formats (long):</pre>
<pre>
      0    13603.012959
      1    13603.012959
      2    13603.0624884259</pre>
<pre>
  Delta string formats (long):</pre>
<pre>
      0    '+0+0+13603+1+29+59'
      1    '+0 +0 +13603 +1 +29 +59'
      2    '+0Y +0M +13603D +1h +29m +59s'
      3    '+0 Y +0 M +13603 D +1 h +29 m +59 s'</pre>
<pre>
  Date number formats (long):</pre>
<pre>
      0    20010401.082959
      1    730576.082959
      2    730576.354155093</pre>
<pre>
  Date string formats (long):</pre>
<pre>
      0    '20010401082959'
      1    '01-Apr-2001 08:29:59'
      2    'Sun 1-Apr-2001 08:29:59'
      3    'Sunday, April 1st 2001 08:29:59'</pre>
<p>If a number outside of the permitted range is specified, or if the value
is not a code reference (see also the next section below for more details),
the default format #0 is used instead.</p>
</li>
<li>
<p>CODEREF</p>
<p>&quot;CODEREF&quot; is the reference of a subroutine which can be passed to the
methods &quot;number_format()&quot;, &quot;delta_format()&quot; and &quot;date_format()&quot; in order
to install a callback function which will be called subsequently whenever
a date (or delta) object needs to be (implicitly) converted into a number
or string.</p>
<p>This happens for instance when you compare two date objects, or when you
put a date object reference in a string between double quotes.</p>
<p>Such a &quot;CODEREF&quot; can also be passed to the methods &quot;number()&quot; and
&quot;string()&quot; for explicitly converting a date object as desired.</p>
</li>
<li>
<p>LANGUAGE</p>
<p>&quot;LANGUAGE&quot; is either a number in the range <code>[1..Languages()]</code>,
or one of the strings &quot;<code>Language_to_Text(1..Languages())</code>&quot;
(see also <a href="../../../Date/Calc(3).html">the Date::Calc(3) manpage</a>).</p>
</li>
<li>
<p>TYPE</p>
<p>&quot;TYPE&quot; is 0 for a regular date and 1 for a delta vector (a list of
year, month, day and optionally hours, minutes and seconds offsets).</p>
</li>
<li>
<p>Storage</p>
<p>&quot;Date::Calc&quot; objects are implemented as two nested arrays.</p>
<p>The &quot;blessed&quot; array (whose reference is the object reference
you receive when calling the &quot;new()&quot; method) contains an
anonymous array at position zero and the object's data in
its remaining fields.</p>
<p>The embedded anonymous array is used for storing the object's
attributes (flags).</p>
<p>Dates and delta vectors always comprise either 3 or 6 data values:
Year, month, day plus (optionally) hours, minutes and seconds.</p>
<p>These values are stored in the &quot;blessed&quot; array at positions 1..3
or 1..6, respectively.</p>
<p>An object without the time values is therefore called &quot;short&quot;,
and an object having time values is called &quot;long&quot; throughout
this manual.</p>
<p>Hint: Whenever possible, if you do not need the time values, omit
them, i.e., always use the &quot;short&quot; form of the object if possible,
this will speed up calculations a little (the short form uses
different (faster) functions for all calculations internally).</p>
<p>The embedded anonymous array contains various flags:</p>
<p>At position zero, it contains the &quot;TYPE&quot; indicator which determines
whether the object is a date or a delta vector.</p>
<p>At position 1, the object stores the &quot;NUMBER&quot; of one of the delta
vector formats, or the reference of a callback function which converts
the contents of the object into string representation if it's a delta
vector, or &quot;undef&quot; if the global settings apply.</p>
<p>At position 2, the object stores the &quot;NUMBER&quot; of one of the date formats,
or the reference of a callback function which converts the contents of
the object into string representation if it's a date, or &quot;undef&quot; if the
global settings apply.</p>
<p>At position 3, the object stores the &quot;LANGUAGE&quot; to be used for all
conversions into strings (where applicable), or &quot;undef&quot; if the global
language setting applies.</p>
<p>Note that your callback functions (see the section &quot;Callback Functions&quot;
further below for more details) do not need to pay attention to the
value at position 3, the language (of the &quot;Date::Calc&quot; module)
will automatically be set to this value whenever the callback
functions are called, and automatically reset to its former value
after the callback.</p>
<p>So if your callback functions use the &quot;*_to_Text*&quot; functions from
the &quot;Date::Calc&quot; module, they will automatically use the correct
language.</p>
<p>Be reminded though that you should <strong>NEVER</strong> access the object's
internal data directly, i.e., through their positional numbers,
but <strong>ALWAYS</strong> through their respective accessor methods, e.g.:</p>
<pre>
        year()
        month()
        day()
        hours()
        minutes()
        seconds()
        date()
        time()
        datetime()
        is_delta()
        is_date()
        is_short()
        is_long()
        delta_format()
        date_format()
        language()</pre>
<p>And although position 4 and onward in the embedded anonymous array is
currently unused, it might not stay so in future releases of this module.</p>
<p>Therefore, in case you need more attributes in a subclass of the
&quot;Date::Calc[::Object]&quot; class, I suggest using values starting at
positions a bit further up, e.g. 6, 8 or 10.</p>
</li>
<li>
<p>Invalid Dates</p>
<p>Only &quot;new()&quot; allows to create objects containing possibly invalid
dates (needed for reading in and evaluating user input, for example).</p>
</li>
<li>
<p>Usage</p>
<p>The methods</p>
<pre>
        accurate_mode()
        number_format()
        delta_format()
        date_format()
        language()
        date()
        time()
        datetime()
        year()
        month()
        day()
        hours()
        minutes()
        seconds()</pre>
<p>are used for reading as well as for setting attributes. They simply
return the values in question if they are called without parameters.</p>
<p>The methods</p>
<pre>
        accurate_mode()
        number_format()
        delta_format()
        date_format()
        language()</pre>
<p>always return the previous value if a new value is set. This allows
you to change these values temporarily and to restore their old value
afterwards more easily (but you can also override the &quot;format&quot; and
&quot;language&quot; settings directly when calling the &quot;number()&quot; or &quot;string()&quot;
method).</p>
<p>The methods</p>
<pre>
        date()
        time()
        datetime()
        year()
        month()
        day()
        hours()
        minutes()
        seconds()</pre>
<p>always return the new values when the corresponding values have
been changed.</p>
<p>The method &quot;date()&quot; NEVER returns the time values (hours, minutes,
seconds) even if they have just been set using this method (which
the method optionally allows). Otherwise it would be very hard to
predict the exact number of values it returns, which might lead
to errors (wrong number of parameters) elsewhere in your program.</p>
<p>The method &quot;datetime()&quot; ALWAYS returns the time values (hours,
minutes, seconds) even if the object in question lacks a time
part. In that case, zeros are returned for hours, minutes and
seconds instead (but the stored time part is left unchanged,
whether it exists or not).</p>
<p>If you do not provide values for hours, minutes and seconds when
using the method &quot;date()&quot; to set the values for year, month and
day, the time part will not be changed (whether it exists or not).</p>
<p>If you do not provide values for hours, minutes and seconds when
using the method &quot;datetime()&quot; to set the values for year, month
and day, the time part will be filled with zeros (the time part
will be created if necessary).</p>
<p>If the object is short, i.e., if it does not have any time values,
the method &quot;time()&quot; returns an empty list.</p>
<p>If the object is short and the methods &quot;hours()&quot;, &quot;minutes()&quot; or
&quot;seconds()&quot; are used to set any of these time values, the object
is automatically promoted to the &quot;long&quot; form, and the other two
time values are filled with zeros.</p>
<p>The following methods can also return &quot;undef&quot; under certain
circumstances:</p>
<pre>
        delta_format()
        date_format()
        language()
        is_delta()
        is_date()
        is_short()
        is_long()
        is_valid()
        hours()
        minutes()
        seconds()
        number()
        string()</pre>
<p>The methods &quot;delta_format()&quot;, &quot;date_format()&quot; and &quot;language()&quot;
return &quot;undef&quot; when they are called as object methods and no
individual override has been defined for the object in question.</p>
<p>The &quot;is_*()&quot; predicate methods return &quot;undef&quot; if the object in
question does not have the expected internal structure. This can
happen for instance when you create an empty object with &quot;new()&quot;.</p>
<p>When called without parameters, the methods &quot;hours()&quot;, &quot;minutes()&quot;
and &quot;seconds()&quot; return &quot;undef&quot; if the object in question does not
have a time part.</p>
<p>The methods &quot;number()&quot; and &quot;string()&quot; return &quot;undef&quot; if the object
in question is not valid (i.e., if &quot;is_valid()&quot; returns &quot;undef&quot; or
false).</p>
<p>And finally, the methods</p>
<pre>
        copy()
        today()
        now()
        today_and_now()
        gmtime()
        localtime()
        tzoffset()
        time2date()
        normalize()</pre>
<p>return the object reference of the (target) object in question
for convenience.</p>
</li>
<li>
<p>Import/Export</p>
<p>Note that you can import and export Unix &quot;time&quot; values using the
methods &quot;gmtime()&quot;, &quot;localtime()&quot;, &quot;mktime()&quot;, &quot;date2time()&quot; and
&quot;time2date()&quot;, both as local time or as UTC/GMT.</p>
</li>
<li>
<p>Accurate Mode</p>
<p>The method &quot;accurate_mode()&quot; controls the internal flag which
determines which of two modes of operation is used.</p>
<p>When set to true (the default at startup), delta vectors are
calculated to give the exact difference in days between two
dates. The &quot;year&quot; and &quot;month&quot; entries in the resulting delta
vector are always zero in that case.</p>
<p>If &quot;accurate mode&quot; is switched off (when the corresponding
flag is set to false), delta vectors are calculated with
year and month differences.</p>
<p>E.g., the difference between <code>[1999,12,6]</code> and <code>[2000,6,24]</code>
is <code>[+0 +0 +201]</code> (plus 201 days) in accurate mode and
<code>[+1 -6 +18]</code> (plus one year, minus 6 months, plus 18 days)
when accurate mode is switched off.</p>
<p>(The delta vector is calculated by simply taking the difference
in years, the difference in months and the difference in days.)</p>
<p>Because years and months have varying lengths in terms of days,
the latter is less accurate than the former because it depends
on the context of the two dates of which it represents the
difference. Added to a different date, the latter delta vector
may yield a different offset in terms of days.</p>
<p>Beware also that - for the same reason - the absolute value
(&quot;<a href="../../../lib/pods/perlfunc.html#abs"><code>abs()</code></a>&quot;) of a delta vector returns a fictitious number
of days if the delta vector contains non-zero values for
&quot;year&quot; and/or &quot;month&quot; (see also next section below for
more details).</p>
<p>Example:</p>
<p>The difference between <code>[2000,1,1]</code> and <code>[2000,3,1]</code> is
<code>[+0 +0 +60]</code> in accurate mode and <code>[+0 +2 +0]</code> else (one
could also call this &quot;year-month-day mode&quot; or &quot;YMD mode&quot; for
short).</p>
<p>When added to the date <code>[2000,4,1]</code>, the &quot;accurate&quot; delta
vector yields the date <code>[2000,5,31]</code>, whereas the other delta
vector yields the date <code>[2000,6,1]</code>.</p>
<p>Moreover, when added to the date <code>[1999,1,1]</code>, the &quot;accurate&quot;
delta vector yields the date <code>[1999,3,2]</code>, whereas the &quot;inaccurate&quot;
delta vector yields the date <code>[1999,3,1]</code>.</p>
<p>Depending on what you want, the one or the other mode may suit
you better.</p>
</li>
<li>
<p>Absolute Value</p>
<p>Note that &quot;<a href="../../../lib/pods/perlfunc.html#abs"><code>abs($date)</code></a>&quot; and &quot;<a href="../../../lib/pods/perlfunc.html#abs"><code>abs($delta)</code></a>&quot; are just shorthands
for &quot;<code>$date-&gt;number()</code>&quot; and &quot;<code>$delta-&gt;number()</code>&quot;.</p>
<p>The operator &quot;<a href="../../../lib/pods/perlfunc.html#abs"><code>abs()</code></a>&quot;, when applied to a date or delta vector,
returns the corresponding number of days (see below for an exception
to this), with the time part (if available) represented by a fraction
after the decimal point.</p>
<p>In the case of dates, the absolute value (to the left of the
decimal point) is the number of days since the 1st of January
1&nbsp;A.D. (by extrapolating the Gregorian calendar back beyond
its &quot;natural&quot; limit of 1582 A.D.) <strong>PLUS ONE</strong>.</p>
<p>(I.e., the absolute value of the 1st of January 1 A.D. is 1.)</p>
<p>Exception:</p>
<p>If the &quot;NUMBER&quot; or &quot;number_format()&quot; is set to 0 (the default
setting), the absolute value of a date to the left of the decimal
point is &quot;yyyymmdd&quot;, i.e., the number in which the uppermost four
digits correspond to the year, the next lower two digits to the
month and the lowermost two digits to the day.</p>
<p>In the case of delta vectors, the absolute value (to the left
of the decimal point) is simply the difference in days (but
see also below).</p>
<p>Note that the absolute value of a delta vector can be negative!</p>
<p>If you want a positive value in all cases, apply the &quot;<a href="../../../lib/pods/perlfunc.html#abs"><code>abs()</code></a>&quot;
operator again, i.e., &quot;<a href="../../../lib/pods/perlfunc.html#abs"><code>$posdiff = abs(abs($delta));</code></a>&quot;.</p>
<p>If the delta vector contains non-zero values for &quot;year&quot; and/or
&quot;month&quot; (see also the discussion of &quot;Accurate Mode&quot; in the section
above), an exact representation in days cannot be calculated,
because years and months do not have fixed equivalents in days.</p>
<p>If nevertheless you attempt to calculate the absolute value of
such a delta vector, a fictitious value is returned, which is
calculated by simply multiplying the year difference with 12,
adding the month difference, multiplying this sum with 31 and
finally adding the day difference.</p>
<p>Beware that because of this, the absolute values of delta
vectors are not necessarily contiguous.</p>
<p>Moreover, since there is more than one way to express the
difference between two dates, comparisons of delta vectors
may not always yield the expected result.</p>
<p>Example:</p>
<p>The difference between the two dates <code>[2000,4,30]</code> and
<code>[2001,5,1]</code> can be expressed as <code>[+1 +1 -29]</code>, or as
<code>[+1 +0 +1]</code>.</p>
<p>The first delta vector has an absolute value of 374,
whereas the latter delta vector has an absolute value
of only 373 (while the true difference in days between
the two dates is 366).</p>
<p>If the date or delta vector has a time part, the time is returned
as a fraction of a full day after the decimal point as follows:</p>
<p>If the &quot;NUMBER&quot; or &quot;number_format()&quot; is set to 0 (the default
setting) or 1, this fraction is simply &quot;.hhmmss&quot;, i.e., the
two digits after the decimal point represent the hours, the
next two digits the minutes and the last two digits the seconds.</p>
<p>Note that you cannot simply add and subtract these values to
yield meaningful dates or deltas again, you can only use them
for comparisons (equal, not equal, less than, greater than,
etc.). If you want to add/subtract, read on:</p>
<p>Only when the &quot;NUMBER&quot; or &quot;number_format()&quot; is set to 2, this
fraction will be the equivalent number of seconds (i.e.,
<code>(((hours * 60) + minutes) * 60) + seconds</code>) divided by the
number of seconds in a full day (i.e., <code>24*60*60 = 86400</code>),
or <code>0/86400</code>, <code>1/86400</code>, ... , <code>86399/86400</code>.</p>
<p>In other words, the (mathematically correct) fraction of a day.</p>
<p>You can safely perform arithmetics with these values as far
as the internal precision of your vendor's implementation
of the C run-time library (on which Perl depends) will permit.</p>
</li>
<li>
<p>Renormalizing Delta Vectors</p>
<p>When adding or subtracting delta vectors to/from one another,
the addition or subtraction takes place component by component.</p>
<p>Example:</p>
<pre>
  [+0 +0 +0 +3 +29 +50] + [+0 +0 +0 +0 +55 +5] = [+0 +0 +0 +3 +84 +55]
  [+0 +0 +0 +3 +29 +50] - [+0 +0 +0 +0 +55 +5] = [+0 +0 +0 +3 -26 +45]</pre>
<p>This may result in time values outside the usual ranges (<code>[-23..+23]</code>
for hours and <code>[-59..+59]</code> for minutes and seconds).</p>
<p>Note that even though the delta value for days will often become quite large,
it is impossible to renormalize this value because there is no constant
conversion factor from days to months (should it be 28, 29, 30 or 31?).</p>
<p>If accurate mode (see further above for what that is) is switched off,
delta vectors can also contain non-zero values for years and months. If
you add or subtract these, the value for months can lie outside the
range <code>[-11..11]</code>, which isn't wrong, but may seem funny.</p>
<p>Therefore, the &quot;normalize()&quot; method will also renormalize the &quot;months&quot;
value, if and only if accurate mode has been switched off. (!)</p>
<p>(Hence, switch accurate mode <strong>ON</strong> temporarily if you <strong>DON'T</strong> want
the renormalization of the &quot;months&quot; value to happen.)</p>
<p>If you want to force the time values from the example above back into
their proper ranges, use the &quot;normalize()&quot; method as follows:</p>
<pre>
  <span class="keyword">print</span> <span class="string">"[</span><span class="variable">$delta</span><span class="string">]\n"</span><span class="operator">;</span>
  <span class="variable">$delta</span><span class="operator">-&gt;</span><span class="variable">normalize</span><span class="operator">();</span>
  <span class="keyword">print</span> <span class="string">"[</span><span class="variable">$delta</span><span class="string">]\n"</span><span class="operator">;</span>
</pre>
<p>This will print</p>
<pre>
  [+0 +0 +0 +3 +84 +55]
  [+0 +0 +0 +4 +24 +55]</pre>
<p>for the first and</p>
<pre>
  [+0 +0 +0 +3 -26 +45]
  [+0 +0 +0 +2 +34 +45]</pre>
<p>for the second delta vector from the example further above.</p>
<p>Note that the values for days, hours, minutes and seconds are
guaranteed to have the same sign after the renormalization.</p>
<p>Under &quot;normal&quot; circumstances, i.e., when accurate mode is on (the
default), this method only has an effect on the time part of the
delta vector.</p>
<p>If the delta vector in question does not have a time part, nothing
is done.</p>
<p>If accurate mode is off, the &quot;months&quot; value is also normalized,
i.e., if it lies outside of the range <code>[-11..11]</code>, integer
multiples of 12 are added to the &quot;years&quot; value and subtracted
from the &quot;months&quot; value. Moreover, the &quot;months&quot; value is
guaranteed to have the same sign as the values for days,
hours, minutes and seconds, unless the &quot;months&quot; value is zero
or the values for days, hours, minutes and seconds are all zero.</p>
<p>If the object in question is a date and if warnings are enabled,
the message &quot;normalizing a date is a no-op&quot; will be printed to
STDERR.</p>
<p>If the object in question is not a valid &quot;Date::Calc&quot; object,
nothing is done.</p>
<p>The method returns its object's reference, which allows chaining
of method calls, as in the following example:</p>
<pre>
  <span class="variable">@time</span> <span class="operator">=</span> <span class="variable">$delta</span><span class="operator">-&gt;</span><span class="variable">normalize</span><span class="operator">()-&gt;</span><span class="variable">time</span><span class="operator">();</span>
</pre>
</li>
<li>
<p>Callback Functions</p>
<p>Note that you are not restricted to the built-in formats
(numbered from 0 to 2 for &quot;number_format()&quot; and &quot;number()&quot;
and from 0 to 3 for &quot;delta_format()&quot;, &quot;date_format()&quot; and
&quot;string()&quot;) for converting a date or delta object into a
number or string.</p>
<p>You can also provide your own function(s) for doing so, in
order to suit your own taste or needs, by passing a subroutine
reference to the appropriate method, i.e., &quot;number_format()&quot;,
&quot;number()&quot;, &quot;delta_format()&quot;, &quot;date_format()&quot; and &quot;string()&quot;.</p>
<p>You can pass a handler to only one or more of these methods,
or to all of them, as you like. You can use different callback
functions, or the same for all.</p>
<p>In order to facilitate the latter, and in order to make the
decoding of the various cases easier for you, the callback
function receives a uniquely identifying function code as
its second parameter:</p>
<pre>
  0  =  TO_NUMBER | IS_DATE  | IS_SHORT  (number[_format])
  1  =  TO_NUMBER | IS_DATE  | IS_LONG   (number[_format])
  2  =  TO_NUMBER | IS_DELTA | IS_SHORT  (number[_format])
  3  =  TO_NUMBER | IS_DELTA | IS_LONG   (number[_format])
  4  =  TO_STRING | IS_DATE  | IS_SHORT  (string|date_format)
  5  =  TO_STRING | IS_DATE  | IS_LONG   (string|date_format)
  6  =  TO_STRING | IS_DELTA | IS_SHORT  (string|delta_format)
  7  =  TO_STRING | IS_DELTA | IS_LONG   (string|delta_format)</pre>
<p>The first parameter of the callback function is of course the
handle of the object in question itself (therefore, the callback
function can actually be an object method - but not a class method,
for obvious reasons).</p>
<p>The handler should return the resulting number or string, as
requested.</p>
<p>BEWARE that you should NEVER rely upon any knowledge of the
object's internal structure, as this may be subject to change!</p>
<p>ALWAYS use the test and access methods provided by this module!</p>
<p>Example:</p>
<pre>
  <span class="keyword">sub</span><span class="variable"> handler
  </span><span class="operator">{</span>
      <span class="keyword">my</span><span class="operator">(</span><span class="variable">$self</span><span class="operator">,</span><span class="variable">$code</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
</pre>
<pre>
      <span class="keyword">if</span>    <span class="operator">(</span><span class="variable">$code</span> <span class="operator">==</span> <span class="number">0</span><span class="operator">)</span> <span class="comment"># TO_NUMBER | IS_DATE  | IS_SHORT</span>
      <span class="operator">{</span>
          <span class="keyword">return</span> <span class="variable">Date_to_Days</span><span class="operator">(</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">date</span><span class="operator">()</span> <span class="operator">);</span>
      <span class="operator">}</span>
      <span class="keyword">elsif</span> <span class="operator">(</span><span class="variable">$code</span> <span class="operator">==</span> <span class="number">1</span><span class="operator">)</span> <span class="comment"># TO_NUMBER | IS_DATE  | IS_LONG</span>
      <span class="operator">{</span>
          <span class="keyword">return</span> <span class="variable">Date_to_Days</span><span class="operator">(</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">date</span><span class="operator">()</span> <span class="operator">)</span> <span class="operator">+</span>
                           <span class="operator">(</span> <span class="operator">(</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">hours</span><span class="operator">()</span> <span class="operator">*</span> <span class="number">60</span> <span class="operator">+</span>
                               <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">minutes</span><span class="operator">()</span> <span class="operator">)</span> <span class="operator">*</span> <span class="number">60</span> <span class="operator">+</span>
                               <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">seconds</span><span class="operator">()</span> <span class="operator">)</span> <span class="operator">/</span> <span class="number">86400</span><span class="operator">;</span>
      <span class="operator">}</span>
      <span class="keyword">elsif</span> <span class="operator">(</span><span class="variable">$code</span> <span class="operator">==</span> <span class="number">2</span><span class="operator">)</span> <span class="comment"># TO_NUMBER | IS_DELTA | IS_SHORT</span>
      <span class="operator">{</span>
          <span class="keyword">return</span> <span class="operator">(</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">year</span><span class="operator">()</span> <span class="operator">*</span> <span class="number">12</span> <span class="operator">+</span>
                   <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">month</span><span class="operator">()</span> <span class="operator">)</span> <span class="operator">*</span> <span class="number">31</span> <span class="operator">+</span>
                   <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">day</span><span class="operator">();</span>
      <span class="operator">}</span>
      <span class="keyword">elsif</span> <span class="operator">(</span><span class="variable">$code</span> <span class="operator">==</span> <span class="number">3</span><span class="operator">)</span> <span class="comment"># TO_NUMBER | IS_DELTA | IS_LONG</span>
      <span class="operator">{</span>
          <span class="keyword">return</span> <span class="operator">(</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">year</span><span class="operator">()</span> <span class="operator">*</span> <span class="number">12</span> <span class="operator">+</span>
                   <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">month</span><span class="operator">()</span> <span class="operator">)</span> <span class="operator">*</span> <span class="number">31</span> <span class="operator">+</span>
                   <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">day</span><span class="operator">()</span> <span class="operator">+</span>
               <span class="operator">(</span> <span class="operator">(</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">hours</span><span class="operator">()</span> <span class="operator">*</span> <span class="number">60</span> <span class="operator">+</span>
                   <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">minutes</span><span class="operator">()</span> <span class="operator">)</span> <span class="operator">*</span> <span class="number">60</span> <span class="operator">+</span>
                   <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">seconds</span><span class="operator">()</span> <span class="operator">)</span> <span class="operator">/</span> <span class="number">86400</span><span class="operator">;</span>
      <span class="operator">}</span>
      <span class="keyword">elsif</span> <span class="operator">(</span><span class="variable">$code</span> <span class="operator">==</span> <span class="number">4</span><span class="operator">)</span> <span class="comment"># TO_STRING | IS_DATE  | IS_SHORT</span>
      <span class="operator">{</span>
          <span class="keyword">return</span> <span class="keyword">join</span><span class="operator">(</span> <span class="string">"/"</span><span class="operator">,</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">date</span><span class="operator">()</span> <span class="operator">);</span>
      <span class="operator">}</span>
      <span class="keyword">elsif</span> <span class="operator">(</span><span class="variable">$code</span> <span class="operator">==</span> <span class="number">5</span><span class="operator">)</span> <span class="comment"># TO_STRING | IS_DATE  | IS_LONG</span>
      <span class="operator">{</span>
          <span class="keyword">return</span> <span class="keyword">join</span><span class="operator">(</span> <span class="string">"/"</span><span class="operator">,</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">date</span><span class="operator">()</span> <span class="operator">)</span> <span class="operator">.</span> <span class="string">" "</span> <span class="operator">.</span>
                 <span class="keyword">join</span><span class="operator">(</span> <span class="string">":"</span><span class="operator">,</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">time</span><span class="operator">()</span> <span class="operator">);</span>
      <span class="operator">}</span>
      <span class="keyword">elsif</span> <span class="operator">(</span><span class="variable">$code</span> <span class="operator">==</span> <span class="number">6</span><span class="operator">)</span> <span class="comment"># TO_STRING | IS_DELTA | IS_SHORT</span>
      <span class="operator">{</span>
          <span class="keyword">return</span> <span class="keyword">join</span><span class="operator">(</span> <span class="string">"|"</span><span class="operator">,</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">date</span><span class="operator">()</span> <span class="operator">);</span>
      <span class="operator">}</span>
      <span class="keyword">elsif</span> <span class="operator">(</span><span class="variable">$code</span> <span class="operator">==</span> <span class="number">7</span><span class="operator">)</span> <span class="comment"># TO_STRING | IS_DELTA | IS_LONG</span>
      <span class="operator">{</span>
          <span class="keyword">return</span> <span class="keyword">join</span><span class="operator">(</span> <span class="string">"|"</span><span class="operator">,</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">datetime</span><span class="operator">()</span> <span class="operator">);</span>
      <span class="operator">}</span>
      <span class="keyword">else</span>
      <span class="operator">{</span>
          <span class="keyword">die</span> <span class="string">"internal error"</span><span class="operator">;</span>
      <span class="operator">}</span>
        <span class="operator">}</span>
</pre>
<pre>
  <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">number_format</span><span class="operator">(\&amp;</span><span class="variable">handler</span><span class="operator">);</span>
  <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">delta_format</span><span class="operator">(\&amp;</span><span class="variable">handler</span><span class="operator">);</span>
  <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">date_format</span><span class="operator">(\&amp;</span><span class="variable">handler</span><span class="operator">);</span>
</pre>
<p>This sets our handler to take care of all automatic conversions,
such as needed when comparing dates or when interpolating a string
in double quotes which contains a date object.</p>
<p>To deactivate a handler, simply pass a valid format number to the
method in question, e.g.:</p>
<pre>
  <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">number_format</span><span class="operator">(</span><span class="number">0</span><span class="operator">);</span>
  <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">delta_format</span><span class="operator">(</span><span class="number">2</span><span class="operator">);</span>
  <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">date_format</span><span class="operator">(</span><span class="number">3</span><span class="operator">);</span>
</pre>
<p>When calling the &quot;number()&quot; or &quot;string()&quot; method explicitly, you can
pass a different format number (than the global setting), like this:</p>
<pre>
  <span class="variable">$number</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">number</span><span class="operator">(</span><span class="number">2</span><span class="operator">);</span>
  <span class="variable">$string</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">string</span><span class="operator">(</span><span class="number">1</span><span class="operator">);</span>
</pre>
<p>You can also pass a handler's reference, like so:</p>
<pre>
  <span class="variable">$number</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">number</span><span class="operator">(\&amp;</span><span class="variable">handler</span><span class="operator">);</span>
  <span class="variable">$string</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">string</span><span class="operator">(\&amp;</span><span class="variable">handler</span><span class="operator">);</span>
</pre>
<p>This overrides the global setting for the duration of the call of
&quot;number()&quot; or &quot;string()&quot; (but doesn't change the global setting
itself).</p>
<p>Moreover, you can also define individual overrides for the date and
the delta vector formats (but not the number format) for individual
objects, e.g.:</p>
<pre>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">delta_format</span><span class="operator">(</span><span class="number">1</span><span class="operator">);</span>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">date_format</span><span class="operator">(</span><span class="number">2</span><span class="operator">);</span>
</pre>
<pre>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">delta_format</span><span class="operator">(\&amp;</span><span class="variable">handler</span><span class="operator">);</span>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">date_format</span><span class="operator">(\&amp;</span><span class="variable">handler</span><span class="operator">);</span>
</pre>
<p>In order to deactivate an individual handler for an object, and/or
in order to deactivate any override altogether (so that the global
settings apply again), you have to pass &quot;undef&quot; explicitly to the
method in question:</p>
<pre>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">delta_format</span><span class="operator">(</span><span class="keyword">undef</span><span class="operator">);</span>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">date_format</span><span class="operator">(</span><span class="keyword">undef</span><span class="operator">);</span>
</pre>
<p>You can also define a language for individual objects (see the
next section immediately below for more details).</p>
<p>If such an individual language override has been set, and if your
callback handlers only use the &quot;*_to_Text*&quot; functions from the
&quot;Date::Calc&quot; module to produce any text, the text produced will
automatically be in the desired language.</p>
<p>This is because the language is set to the value determined by
the individual override before the callback handler is executed,
and reset to its previous value afterwards.</p>
</li>
<li>
<p>Languages</p>
<p>Note that this module is completely transparent to the setting
of a language in &quot;Date::Calc&quot;. This means that you can choose a
language in &quot;Date::Calc&quot; (with the &quot;Language()&quot; function) and all
dates subsequently printed by this module will automatically be
in that language - provided that you use the built-in formats of
this module, or that you use the &quot;*to_Text*&quot; functions from the
&quot;Date::Calc&quot; module in your formatting handler (callback function).</p>
<p>However, this global language setting can be overridden for
individual date (or delta) objects by using the <strong>OBJECT</strong> method</p>
<pre>
    <span class="variable">$oldlang</span> <span class="operator">=</span> <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">language</span><span class="operator">(</span><span class="variable">$newlang</span><span class="operator">);</span>
</pre>
<p>(The global setting is not altered by this in any way.)</p>
<p>In order to deactivate such an individual language setting
(so that the global setting applies again), simply pass the
value &quot;undef&quot; explicitly to the &quot;language()&quot; object method:</p>
<pre>
  <span class="variable">$date</span><span class="operator">-&gt;</span><span class="variable">language</span><span class="operator">(</span><span class="keyword">undef</span><span class="operator">);</span>
</pre>
<p>The <strong>CLASS</strong> method</p>
<pre>
    <span class="variable">$oldlang</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">language</span><span class="operator">(</span><span class="variable">$newlang</span><span class="operator">);</span>
</pre>
<p>is just a convenient wrapper around the &quot;Language()&quot; function,
which allows you to enter language numbers (as returned by the
&quot;Decode_Language()&quot; function) or strings (as returned by the
&quot;Language_to_Text()&quot; function), at your option.</p>
<p>The &quot;language()&quot; method (both class and object) always returns
the <strong>NAME</strong> (one of &quot;<code>Language_to_Text(1..Languages())</code>&quot;) of
the current setting (and never its number).</p>
</li>
<li>
<p>Exported Functions</p>
<p>The &quot;Date::Calc::Object&quot; package imports &quot;:all&quot; functions exported
by the &quot;Date::Calc&quot; module and re-exports them, for conveniency.</p>
<p>This allows you to write</p>
<pre>
  <span class="keyword">use</span> <span class="variable">Date::Calc::Object</span> <span class="string">qw(...)</span><span class="operator">;</span>
</pre>
<p>instead of</p>
<pre>
  <span class="keyword">use</span> <span class="variable">Date::Calc</span> <span class="string">qw(...)</span><span class="operator">;</span>
</pre>
<p>but with exactly the same semantics. The difference is that
the object-oriented frontend is loaded additionally in the
first case.</p>
<p>As with &quot;Date::Calc&quot; you can use the &quot;:all&quot; tag to import all
of &quot;Date::Calc&quot;'s functions:</p>
<pre>
  <span class="keyword">use</span> <span class="variable">Date::Calc::Object</span> <span class="string">qw(:all)</span><span class="operator">;</span>
</pre>
<p>In addition to the functions exported by &quot;Date::Calc&quot;, the
&quot;Date::Calc::Object&quot; package offers some utility functions
of its own for export:</p>
<pre>
    <span class="variable">$year</span>                          <span class="operator">=</span> <span class="variable">shift_year</span><span class="operator">(\</span><span class="variable">@_</span><span class="operator">);</span>
    <span class="operator">(</span><span class="variable">$year</span><span class="operator">,</span><span class="variable">$mm</span><span class="operator">,</span><span class="variable">$dd</span><span class="operator">)</span>                <span class="operator">=</span> <span class="variable">shift_date</span><span class="operator">(\</span><span class="variable">@_</span><span class="operator">);</span>
    <span class="operator">(</span><span class="variable">$hrs</span><span class="operator">,</span><span class="variable">$min</span><span class="operator">,</span><span class="variable">$sec</span><span class="operator">)</span>               <span class="operator">=</span> <span class="variable">shift_time</span><span class="operator">(\</span><span class="variable">@_</span><span class="operator">);</span>
    <span class="operator">(</span><span class="variable">$year</span><span class="operator">,</span><span class="variable">$mm</span><span class="operator">,</span><span class="variable">$dd</span><span class="operator">,</span><span class="variable">$hrs</span><span class="operator">,</span><span class="variable">$min</span><span class="operator">,</span><span class="variable">$sec</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">shift_datetime</span><span class="operator">(\</span><span class="variable">@_</span><span class="operator">);</span>
</pre>
<p>These functions enable your subroutines or methods to accept
a &quot;Date::Calc&quot; (or subclass) date object, an (anonymous) array
or a list (containing the necessary values) as parameters
<strong>INTERCHANGEABLY</strong>.</p>
<p>You can import all of these auxiliary functions by using an
&quot;:aux&quot; tag:</p>
<pre>
  <span class="keyword">use</span> <span class="variable">Date::Calc::Object</span> <span class="string">qw(:aux)</span><span class="operator">;</span>
</pre>
<p>If you want to import both all of the &quot;Date::Calc&quot; functions
as well as all these auxiliary functions, use the &quot;:ALL&quot; tag:</p>
<pre>
  <span class="keyword">use</span> <span class="variable">Date::Calc::Object</span> <span class="string">qw(:ALL)</span><span class="operator">;</span>
</pre>
</li>
<li>
<p>Subclassing</p>
<p>In case you want to subclass &quot;Date::Calc&quot; objects and to add
new attributes of your own, it is recommended that you proceed
as follows (the following will be considered as a part of the
module's &quot;contract of use&quot; - which might be subject to change
in the future, however):</p>
<p>Define a constant for the index of each attribute you want to
add, currently starting no lower than &quot;4&quot;, at the top of your
subclass:</p>
<pre>
    <span class="keyword">use</span> <span class="variable">constant</span> <span class="string">ATTRIB1</span> <span class="operator">=&gt;</span> <span class="number">4</span><span class="operator">;</span>
    <span class="keyword">use</span> <span class="variable">constant</span> <span class="string">ATTRIB2</span> <span class="operator">=&gt;</span> <span class="number">5</span><span class="operator">;</span>
    <span class="keyword">use</span> <span class="variable">constant</span> <span class="string">ATTRIB3</span> <span class="operator">=&gt;</span> <span class="number">6</span><span class="operator">;</span>
    <span class="operator">...</span>
</pre>
<p>It is recommended that you use constants (which are easy to
change), because I someday might want to require the element
with index &quot;4&quot; for a new attribute of my own... <code>:-)</code></p>
<p>Then access your attributes like so (e.g. after calling
&quot;<code>$self = SUPER-&gt;new();</code>&quot; in your constructor method):</p>
<pre>
    <span class="variable">$self</span><span class="operator">-&gt;</span><span class="operator">[</span><span class="number">0</span><span class="operator">][</span><span class="variable">ATTRIB1</span><span class="operator">]</span> <span class="operator">=</span> <span class="string">'value1'</span><span class="operator">;</span>
    <span class="variable">$self</span><span class="operator">-&gt;</span><span class="operator">[</span><span class="number">0</span><span class="operator">][</span><span class="variable">ATTRIB2</span><span class="operator">]</span> <span class="operator">=</span> <span class="string">'value2'</span><span class="operator">;</span>
    <span class="variable">$self</span><span class="operator">-&gt;</span><span class="operator">[</span><span class="number">0</span><span class="operator">][</span><span class="variable">ATTRIB3</span><span class="operator">]</span> <span class="operator">=</span> <span class="string">'value3'</span><span class="operator">;</span>
    <span class="operator">...</span>
</pre>
<p>Beware that if you put anything other than numbers or strings
into your attributes, the methods &quot;clone()&quot; and &quot;copy()&quot; might
not work as expected anymore!</p>
<p>Especially if your attributes contain references to other data
structures, only the references will be copied, but not the data
structures themselves.</p>
<p>This may not be what you want.</p>
<p>(You will have to override these two methods and write some
of your own if not.)</p>
<p>In order for the overloaded operators and the &quot;shift_*()&quot;
auxiliary functions from the &quot;Date::Calc::Object&quot; package
to work properly (the latter of which are heavily used in
the &quot;Date::Calendar[::Year]&quot; modules, for instance), the
package name of your subclass (= the one your objects will
be blessed into) is <strong>REQUIRED</strong> to contain a &quot;::&quot;.</p>
<p>Note that you should <strong>ONLY</strong> subclass &quot;Date::Calc&quot;, <strong>NEVER</strong>
&quot;Date::Calc::Object&quot;, since subclassing the latter is less
efficient (because &quot;Date::Calc::Object&quot; is just an empty class
which inherits from &quot;Date::Calc&quot; - subclassing &quot;Date::Calc::Object&quot;
would thus just introduce an additional name space layer to search
during Perl's runtime method binding process).</p>
<p>If you give your subclass a package name below/inside the
&quot;Date::&quot; namespace, you will also benefit from the fact that
all error messages produced by the &quot;Date::Calc[::Object]&quot; module
(and also the &quot;Date::Calendar[::Year]&quot; modules, by the way)
will appear to have originated from the place outside of all
&quot;<code>/^Date::/</code>&quot; modules (including yours) where one of the &quot;Date::&quot;
modules was first called - i.e., all errors are always blamed
on the user, no matter how deeply nested inside the &quot;Date::&quot;
modules they occur, and do not usually refer to places inside
any of the &quot;Date::&quot; modules (this assumes that there are no
bugs in the &quot;Date::&quot; modules, and that all errors are always
the user's fault <code>:-)</code>).</p>
<p>Moreover, your module's own error messages will behave in the
same way if you &quot;<code>use Carp::Clan qw(^Date::);</code>&quot; at the top of
your module and if you produce all error messages using &quot;carp()&quot;
and &quot;croak()&quot; (instead of &quot;warn()&quot; and &quot;die()&quot;, respectively).</p>
</li>
</ul>
<p>
</p>
<hr />
<h1><a name="examples">EXAMPLES</a></h1>
<ol>
<li><strong><a name="_34" class="item">)</a></strong>

<pre>
  <span class="comment"># Switch to summer time:</span>
  <span class="variable">$now</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">now</span><span class="operator">();</span>
  <span class="keyword">if</span> <span class="operator">((</span><span class="variable">$now</span> <span class="keyword">ge</span> <span class="operator">[</span><span class="number">2000</span><span class="operator">,</span><span class="number">3</span><span class="operator">,</span><span class="number">26</span><span class="operator">,</span><span class="number">2</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">]</span><span class="operator">)</span> <span class="keyword">and</span>
      <span class="operator">(</span><span class="variable">$now</span> <span class="keyword">lt</span> <span class="operator">[</span><span class="number">2000</span><span class="operator">,</span><span class="number">3</span><span class="operator">,</span><span class="number">26</span><span class="operator">,</span><span class="number">3</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">]</span><span class="operator">))</span>
  <span class="operator">{</span>
      <span class="variable">$now</span> <span class="operator">+=</span> <span class="operator">[</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">1</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">]</span><span class="operator">;</span>
  <span class="operator">}</span>
</pre>
<li><strong><a name="_35" class="item">)</a></strong>

<pre>
  <span class="keyword">use</span> <span class="variable">Date::Calc::Object</span> <span class="string">qw(:all)</span><span class="operator">;</span>
</pre>
<pre>
  <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">date_format</span><span class="operator">(</span><span class="number">3</span><span class="operator">);</span>
</pre>
<pre>
  <span class="variable">$date</span> <span class="operator">=</span> <span class="number">0</span><span class="operator">;</span>
  <span class="keyword">while</span> <span class="operator">(!</span><span class="variable">$date</span><span class="operator">)</span>
  <span class="operator">{</span>
      <span class="keyword">print</span> <span class="string">"Please enter the date of your birthday (day-month-year): "</span><span class="operator">;</span>
      <span class="variable">$date</span> <span class="operator">=</span> <span class="variable">Date::Calc</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span> <span class="variable">Decode_Date_EU</span><span class="operator">(</span> <span class="keyword">scalar</span><span class="operator">(&lt;</span><span class="variable">STDIN</span><span class="operator">&gt;)</span> <span class="operator">)</span> <span class="operator">);</span>
      <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date</span><span class="operator">)</span>
      <span class="operator">{</span>
          <span class="variable">$resp</span> <span class="operator">=</span> <span class="number">0</span><span class="operator">;</span>
          <span class="keyword">while</span> <span class="operator">(</span><span class="variable">$resp</span> <span class="operator">!~</span> <span class="regex">/^\s*[YyNn]/</span><span class="operator">)</span>
          <span class="operator">{</span>
              <span class="keyword">print</span> <span class="string">"Your birthday is: </span><span class="variable">$date</span><span class="string">\n"</span><span class="operator">;</span>
              <span class="keyword">print</span> <span class="string">"Is that correct? (yes/no) "</span><span class="operator">;</span>
              <span class="variable">$resp</span> <span class="operator">=</span> <span class="operator">&lt;</span><span class="variable">STDIN</span><span class="operator">&gt;;</span>
          <span class="operator">}</span>
          <span class="variable">$date</span> <span class="operator">=</span> <span class="number">0</span> <span class="keyword">unless</span> <span class="operator">(</span><span class="variable">$resp</span> <span class="operator">=~</span> <span class="regex">/^\s*[Yy]/</span><span class="operator">)</span>
      <span class="operator">}</span>
      <span class="keyword">else</span>
      <span class="operator">{</span>
          <span class="keyword">print</span> <span class="string">"Unable to parse your birthday. Please try again.\n"</span><span class="operator">;</span>
      <span class="operator">}</span>
  <span class="operator">}</span>
</pre>
<pre>
  <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$date</span> <span class="operator">+</span> <span class="operator">[</span><span class="number">18</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">]</span> <span class="operator">&lt;=</span> <span class="operator">[</span><span class="variable">Today</span><span class="operator">()</span><span class="operator">]</span><span class="operator">)</span>
      <span class="operator">{</span> <span class="keyword">print</span> <span class="string">"Ok, you are over 18.\n"</span><span class="operator">;</span> <span class="operator">}</span>
  <span class="keyword">else</span>
      <span class="operator">{</span> <span class="keyword">print</span> <span class="string">"Sorry, you are under 18!\n"</span><span class="operator">;</span> <span class="operator">}</span>
</pre>
</ol>
<p>For more examples, see the &quot;examples&quot; subdirectory in this distribution,
and their descriptions in the file &quot;EXAMPLES.txt&quot;.</p>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p>Date::Calc(3), Date::Calendar(3),
Date::Calendar::Year(3), Date::Calendar::Profiles(3).</p>
<p>
</p>
<hr />
<h1><a name="version">VERSION</a></h1>
<p>This man page documents &quot;Date::Calc::Object&quot; version 5.4.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<pre>
  Steffen Beyer
  <a href="mailto:sb@engelschall.com">mailto:sb@engelschall.com</a>
  <a href="http://www.engelschall.com/u/sb/download/">http://www.engelschall.com/u/sb/download/</a></pre>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright (c) 2000 - 2004 by Steffen Beyer. All rights reserved.</p>
<p>
</p>
<hr />
<h1><a name="license">LICENSE</a></h1>
<p>This package is free software; you can redistribute it and/or
modify it under the same terms as Perl itself, i.e., under the
terms of the &quot;Artistic License&quot; or the &quot;GNU General Public License&quot;.</p>
<p>Please refer to the files &quot;Artistic.txt&quot; and &quot;GNU_GPL.txt&quot;
in this distribution for details!</p>
<p>
</p>
<hr />
<h1><a name="disclaimer">DISCLAIMER</a></h1>
<p>This package is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
<p>See the &quot;GNU General Public License&quot; for more details.</p>

</body>

</html>
